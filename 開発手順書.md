# ğŸ“‹ SNSå‹•ç”»å–¶æ¥­ãƒ­ãƒ¼ãƒ—ãƒ¬ã‚·ã‚¹ãƒ†ãƒ  é–‹ç™ºæ‰‹é †æ›¸

> è¦ä»¶å®šç¾©æ›¸v4.0ã«åŸºã¥ã8é€±é–“ã®è©³ç´°å®Ÿè£…ã‚¬ã‚¤ãƒ‰

---

## ğŸ“ ç¾åœ¨åœ°

```
é–‹ç™ºé€²æ—: 35%å®Œæˆï¼ˆWeek 1å®Œäº† / å…¨8é€±é–“ï¼‰

â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡

âœ… å®Œäº†: éŸ³å£°å¯¾è©±ã®åŸºæœ¬æ©Ÿèƒ½ï¼ˆSTEP 0-4ç›¸å½“ï¼‰
âœ… å®Œäº†: RAGã®åŸºæœ¬æ§‹é€ ï¼ˆSTEP 6ã®ä¸€éƒ¨ï¼‰
âœ… å®Œäº†: Week 1 - Googleèªè¨¼ + åº—èˆ—ç®¡ç†åŸºç›¤ï¼ˆ2025-11-11ï¼‰
âŒ æœªç€æ‰‹: Week 2ä»¥é™ï¼ˆ6ã‚·ãƒŠãƒªã‚ªæ§‹ç¯‰ã€œãƒ‡ãƒ—ãƒ­ã‚¤ï¼‰

æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—: Week 2 - 6ã‚·ãƒŠãƒªã‚ªæ§‹ç¯‰ + éŸ³å£°ãƒ‡ãƒ¼ã‚¿å‡¦ç†
```

---

## ğŸ—“ï¸ 8é€±é–“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«æ¦‚è¦

| Week | ãƒ•ã‚§ãƒ¼ã‚º | ä¸»è¦æˆæœç‰© | é€²æ— |
|------|---------|-----------|------|
| **Week 1** | Googleèªè¨¼ + åº—èˆ—ç®¡ç†åŸºç›¤ | èªè¨¼ä»˜ãã‚¢ãƒ—ãƒª | âœ… **å®Œäº†ï¼ˆ2025-11-11ï¼‰** |
| **Week 2** | 6ã‚·ãƒŠãƒªã‚ª + RAGæ§‹ç¯‰ | RAGãƒ‡ãƒ¼ã‚¿600-800ä»¶ | â³ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ— |
| **Week 3** | ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ– | Supabaseçµ±åˆå®Œäº† | â¬œ æœªç€æ‰‹ |
| **Week 4** | å±¥æ­´é–²è¦§ + CSVå‡ºåŠ› | æˆé•·å¯è¦–åŒ–æ©Ÿèƒ½ | â¬œ æœªç€æ‰‹ |
| **Week 5** | è©•ä¾¡ç²¾åº¦å‘ä¸Š | è¬›å¸«è©•ä¾¡80%ä¸€è‡´ | â¬œ æœªç€æ‰‹ |
| **Week 6** | åº—èˆ—ç®¡ç†æ©Ÿèƒ½ | ãƒ•ãƒ©ãƒ³ãƒãƒ£ã‚¤ã‚ºç®¡ç† | â¬œ æœªç€æ‰‹ |
| **Week 7** | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ– | 100åº—èˆ—å¯¾å¿œå®Œäº† | â¬œ æœªç€æ‰‹ |
| **Week 8** | ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ | æœ¬ç•ªç¨¼åƒå¯èƒ½ | â¬œ æœªç€æ‰‹ |

---

## ğŸ“… Week 1: Googleèªè¨¼ + åº—èˆ—ç®¡ç†åŸºç›¤

**ç›®æ¨™**: èªè¨¼ä»˜ãã‚¢ãƒ—ãƒªï¼ˆåº—èˆ—ã‚³ãƒ¼ãƒ‰å¿…é ˆï¼‰

### âœ… **å®Œäº†çŠ¶æ³ï¼ˆ2025-11-11ï¼‰**

**å®Ÿè£…å®Œäº†ã—ãŸæ©Ÿèƒ½:**
- âœ… Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆãƒ»ç’°å¢ƒå¤‰æ•°è¨­å®š
- âœ… Google OAuthèªè¨¼ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆï¼‰
- âœ… 4ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆï¼ˆstores, profiles, conversations, evaluationsï¼‰
- âœ… RLSï¼ˆRow Level Securityï¼‰è¨­å®š
- âœ… åˆå›ç™»éŒ²ãƒ•ãƒ­ãƒ¼ï¼ˆåº—èˆ—ã‚³ãƒ¼ãƒ‰æ¤œè¨¼ â†’ ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä½œæˆï¼‰
- âœ… æœ¬éƒ¨ç®¡ç†è€…å°‚ç”¨ã®åº—èˆ—ç®¡ç†ç”»é¢ï¼ˆåº—èˆ—ã‚³ãƒ¼ãƒ‰è‡ªå‹•ç”Ÿæˆãƒ»ä¸€è¦§è¡¨ç¤ºï¼‰
- âœ… èªè¨¼çŠ¶æ…‹ç®¡ç†ï¼ˆAuthContext + React Routerï¼‰
- âœ… ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒUIçµ±ä¸€ï¼ˆå…¨èªè¨¼ç”»é¢ + ç®¡ç†ç”»é¢ï¼‰

**ç™ºç”Ÿã—ãŸå•é¡Œã¨è§£æ±º:**
1. **RLSå¾ªç’°å‚ç…§å•é¡Œ** - ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯ãŒprofilesãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‚ç…§ã—ç„¡é™ãƒ«ãƒ¼ãƒ—
   - è§£æ±º: ãƒãƒªã‚·ãƒ¼ã‚’ç°¡ç´ åŒ–ã—ã€èªè¨¼ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¨å“¡ãŒé–²è¦§å¯èƒ½ã«å¤‰æ›´
2. **èªè¨¼åˆæœŸåŒ–ã®ç«¶åˆçŠ¶æ…‹** - `initAuth`ã¨`onAuthStateChange`ãŒç«¶åˆã—èª­ã¿è¾¼ã¿ç„¡é™ãƒ«ãƒ¼ãƒ—
   - è§£æ±º: `isInitialized`ãƒ•ãƒ©ã‚°ã‚’å°å…¥ã—ã€åˆæœŸåŒ–å®Œäº†å¾Œã®ã¿ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†
3. **UIä¸çµ±ä¸€** - ãƒ­ã‚°ã‚¤ãƒ³/ç™»éŒ²ç”»é¢ãŒæ—§ãƒ‡ã‚¶ã‚¤ãƒ³
   - è§£æ±º: å…¨ç”»é¢ã‚’æš—ã„ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯ + ã‚¬ãƒ©ã‚¹ã‚«ãƒ¼ãƒ‰ã«çµ±ä¸€

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«:**
- `src/lib/supabase.ts` - Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
- `src/contexts/AuthContext.tsx` - èªè¨¼çŠ¶æ…‹ç®¡ç†
- `src/components/Auth/LoginPage.tsx` - ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
- `src/components/Auth/RegisterPage.tsx` - åˆå›ç™»éŒ²ç”»é¢
- `src/components/Auth/AuthCallback.tsx` - OAuth ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
- `src/components/Admin/StoreManagementPage.tsx` - åº—èˆ—ç®¡ç†ç”»é¢
- `src/components/Header.tsx` - ãƒ˜ãƒƒãƒ€ãƒ¼ï¼ˆãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½ï¼‰
- `database/01_create_stores.sql` ã€œ `06_fix_rls_circular_reference.sql` - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³

---

### Day 1: Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ

#### ã‚¿ã‚¹ã‚¯

- [ ] Supabaseã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆï¼ˆhttps://supabase.comï¼‰
- [ ] æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
  - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå: `rollplay-sns-video`
  - ãƒªãƒ¼ã‚¸ãƒ§ãƒ³: `Tokyo (Northeast Asia)`
  - ãƒ—ãƒ©ãƒ³: Freeï¼ˆé–‹ç™ºç”¨ï¼‰â†’ Proï¼ˆæœ¬ç•ªç”¨ï¼‰
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆURLãƒ»API Keyã‚’å–å¾—
  - Project URL: `https://xxx.supabase.co`
  - anon key: `eyJhbGc...`
  - service_role key: `eyJhbGc...`ï¼ˆç®¡ç†ç”¨ï¼‰

#### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°

```bash
# .envãƒ•ã‚¡ã‚¤ãƒ«ã«è¿½åŠ 
VITE_SUPABASE_URL=https://xxx.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGc...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGc...
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆå®Œäº†
- [ ] .envãƒ•ã‚¡ã‚¤ãƒ«ã«èªè¨¼æƒ…å ±è¿½åŠ 
- [ ] Supabase Dashboardã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½

---

### Day 2: Google OAuthè¨­å®š

#### ã‚¿ã‚¹ã‚¯1: Google Cloud Consoleè¨­å®š

- [ ] Google Cloud Console ã«ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆhttps://console.cloud.google.comï¼‰
- [ ] æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ: `rollplay-sns-video`
- [ ] OAuthåŒæ„ç”»é¢ã‚’è¨­å®š
  - User Type: å¤–éƒ¨
  - ã‚¢ãƒ—ãƒªå: `SNSå‹•ç”»å–¶æ¥­ãƒ­ãƒ¼ãƒ—ãƒ¬ã‚·ã‚¹ãƒ†ãƒ `
  - ã‚µãƒãƒ¼ãƒˆãƒ¡ãƒ¼ãƒ«: ï¼ˆè‡ªç¤¾ãƒ¡ãƒ¼ãƒ«ï¼‰
- [ ] èªè¨¼æƒ…å ± â†’ OAuth 2.0 ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDä½œæˆ
  - ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç¨®é¡: ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
  - æ‰¿èªæ¸ˆã¿ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆURI:
    ```
    https://xxx.supabase.co/auth/v1/callback
    ```
- [ ] ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆIDãƒ»ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’å–å¾—
  - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆID: `123456789-xxx.apps.googleusercontent.com`
  - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ: `GOCSPX-xxx`

#### ã‚¿ã‚¹ã‚¯2: Supabase Authè¨­å®š

- [ ] Supabase Dashboard â†’ Authentication â†’ Providers
- [ ] Google ã‚’æœ‰åŠ¹åŒ–
- [ ] Google Client IDãƒ»Secret ã‚’å…¥åŠ›
- [ ] Redirect URLã‚’ç¢ºèª

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] Google OAuthè¨­å®šå®Œäº†
- [ ] Supabaseå´ã§Googleèªè¨¼æœ‰åŠ¹åŒ–
- [ ] ãƒ†ã‚¹ãƒˆç”¨Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³ç¢ºèª

---

### Day 3: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆãƒ»æ§‹ç¯‰

#### ã‚¿ã‚¹ã‚¯1: stores ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ

```sql
-- Supabase SQL Editor ã§å®Ÿè¡Œ

-- åº—èˆ—ãƒã‚¹ã‚¿
CREATE TABLE stores (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  store_code TEXT UNIQUE NOT NULL,
  store_name TEXT NOT NULL,
  region TEXT,
  status TEXT DEFAULT 'active',
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_store_code ON stores(store_code);
CREATE INDEX idx_region ON stores(region);
CREATE INDEX idx_status ON stores(status);

-- ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥
INSERT INTO stores (store_code, store_name, region, status) VALUES
  ('STORE_001', 'æ±äº¬éŠ€åº§åº—', 'é–¢æ±', 'active'),
  ('STORE_002', 'å¤§é˜ªæ¢…ç”°åº—', 'é–¢è¥¿', 'active'),
  ('STORE_003', 'ç¦å²¡å¤©ç¥åº—', 'ä¹å·', 'active');
```

#### ã‚¿ã‚¹ã‚¯2: profiles ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ

```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼ˆSupabase Authã¨é€£æºï¼‰
CREATE TABLE profiles (
  id UUID PRIMARY KEY REFERENCES auth.users ON DELETE CASCADE,
  store_id UUID REFERENCES stores ON DELETE SET NULL,
  store_code TEXT,
  display_name TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  avatar_url TEXT,
  role TEXT DEFAULT 'user',  -- admin/manager/user
  created_at TIMESTAMP DEFAULT NOW(),
  last_active_at TIMESTAMP
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_profile_store ON profiles(store_id);
CREATE INDEX idx_profile_email ON profiles(email);
CREATE INDEX idx_profile_role ON profiles(role);
```

#### ã‚¿ã‚¹ã‚¯3: conversations ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ

```sql
-- ä¼šè©±å±¥æ­´
CREATE TABLE conversations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES profiles ON DELETE CASCADE,
  store_id UUID REFERENCES stores,
  scenario_id TEXT NOT NULL,
  scenario_title TEXT,
  messages JSONB NOT NULL,
  duration_seconds INT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_conv_user ON conversations(user_id, created_at DESC);
CREATE INDEX idx_conv_store ON conversations(store_id, created_at DESC);
CREATE INDEX idx_conv_scenario ON conversations(scenario_id);
```

#### ã‚¿ã‚¹ã‚¯4: evaluations ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ

```sql
-- è©•ä¾¡å±¥æ­´
CREATE TABLE evaluations (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  conversation_id UUID REFERENCES conversations ON DELETE CASCADE,
  user_id UUID REFERENCES profiles ON DELETE CASCADE,
  store_id UUID REFERENCES stores,
  scenario_id TEXT NOT NULL,
  scores JSONB NOT NULL,
  total_score INT,
  average_score DECIMAL(3,2),
  comments JSONB,
  created_at TIMESTAMP DEFAULT NOW()
);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
CREATE INDEX idx_eval_user ON evaluations(user_id, created_at DESC);
CREATE INDEX idx_eval_store ON evaluations(store_id, created_at DESC);
CREATE INDEX idx_eval_scenario ON evaluations(scenario_id);
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆå®Œäº†
- [ ] ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿æŒ¿å…¥ç¢ºèª
- [ ] Supabase Table Editorã§ç¢ºèª

---

### Day 4: RLSï¼ˆRow Level Securityï¼‰è¨­å®š

#### ã‚¿ã‚¹ã‚¯1: conversationsç”¨RLS

```sql
-- RLSã‚’æœ‰åŠ¹åŒ–
ALTER TABLE conversations ENABLE ROW LEVEL SECURITY;

-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã®ã¿é–²è¦§
CREATE POLICY "Users can view own conversations"
  ON conversations FOR SELECT
  USING (auth.uid() = user_id);

-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªåˆ†ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆ
CREATE POLICY "Users can insert own conversations"
  ON conversations FOR INSERT
  WITH CHECK (auth.uid() = user_id);

-- åº—èˆ—ç®¡ç†è€…ã¯è‡ªåº—èˆ—ã®ãƒ‡ãƒ¼ã‚¿ã‚’é–²è¦§
CREATE POLICY "Managers can view store conversations"
  ON conversations FOR SELECT
  USING (
    EXISTS (
      SELECT 1 FROM profiles
      WHERE id = auth.uid()
        AND role = 'manager'
        AND store_id = conversations.store_id
    )
  );

-- æœ¬éƒ¨ç®¡ç†è€…ã¯å…¨ãƒ‡ãƒ¼ã‚¿é–²è¦§
CREATE POLICY "Admins can view all conversations"
  ON conversations FOR SELECT
  USING (
    EXISTS (
      SELECT 1 FROM profiles
      WHERE id = auth.uid() AND role = 'admin'
    )
  );
```

#### ã‚¿ã‚¹ã‚¯2: evaluationsç”¨RLS

```sql
-- RLSã‚’æœ‰åŠ¹åŒ–
ALTER TABLE evaluations ENABLE ROW LEVEL SECURITY;

-- åŒæ§˜ã®ãƒãƒªã‚·ãƒ¼ã‚’è¨­å®š
CREATE POLICY "Users can view own evaluations"
  ON evaluations FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can insert own evaluations"
  ON evaluations FOR INSERT
  WITH CHECK (auth.uid() = user_id);

CREATE POLICY "Managers can view store evaluations"
  ON evaluations FOR SELECT
  USING (
    EXISTS (
      SELECT 1 FROM profiles
      WHERE id = auth.uid()
        AND role = 'manager'
        AND store_id = evaluations.store_id
    )
  );

CREATE POLICY "Admins can view all evaluations"
  ON evaluations FOR SELECT
  USING (
    EXISTS (
      SELECT 1 FROM profiles
      WHERE id = auth.uid() AND role = 'admin'
    )
  );
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] RLSè¨­å®šå®Œäº†
- [ ] ãƒãƒªã‚·ãƒ¼ãƒ†ã‚¹ãƒˆï¼ˆä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ç¢ºèªï¼‰
- [ ] æ¨©é™æ¼æ´©ãŒãªã„ã“ã¨ã‚’ç¢ºèª

---

### Day 5: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ - Supabaseçµ±åˆ

#### ã‚¿ã‚¹ã‚¯1: Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®š

```bash
# ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install @supabase/supabase-js
```

```typescript
// src/lib/supabase.ts
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = import.meta.env.VITE_SUPABASE_URL
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY

export const supabase = createClient(supabaseUrl, supabaseAnonKey)
```

#### ã‚¿ã‚¹ã‚¯2: Googleèªè¨¼UI

```tsx
// src/components/Auth/LoginPage.tsx
import { supabase } from '@/lib/supabase'

export function LoginPage() {
  const handleGoogleLogin = async () => {
    const { error } = await supabase.auth.signInWithOAuth({
      provider: 'google',
      options: {
        redirectTo: `${window.location.origin}/auth/callback`
      }
    })
    if (error) console.error('Login error:', error)
  }

  return (
    <div className="min-h-screen flex items-center justify-center">
      <div className="max-w-md w-full p-8 bg-white rounded-lg shadow-lg">
        <h1 className="text-2xl font-bold mb-6 text-center">
          SNSå‹•ç”»å–¶æ¥­ãƒ­ãƒ¼ãƒ—ãƒ¬ã‚·ã‚¹ãƒ†ãƒ 
        </h1>

        <button
          onClick={handleGoogleLogin}
          className="w-full bg-white border border-gray-300 rounded-lg p-3 flex items-center justify-center gap-3 hover:bg-gray-50"
        >
          <img src="/google-icon.svg" alt="Google" className="w-5 h-5" />
          Googleã§ãƒ­ã‚°ã‚¤ãƒ³
        </button>
      </div>
    </div>
  )
}
```

#### ã‚¿ã‚¹ã‚¯3: åˆå›ç™»éŒ²ãƒ•ãƒ­ãƒ¼ï¼ˆåº—èˆ—ã‚³ãƒ¼ãƒ‰å…¥åŠ›ï¼‰

```tsx
// src/components/Auth/RegisterPage.tsx
import { useState } from 'react'
import { supabase } from '@/lib/supabase'

export function RegisterPage() {
  const [storeCode, setStoreCode] = useState('')
  const [storeCodeValid, setStoreCodeValid] = useState(false)
  const [storeName, setStoreName] = useState('')
  const [displayName, setDisplayName] = useState('')

  const user = supabase.auth.getUser()

  // åº—èˆ—ã‚³ãƒ¼ãƒ‰æ¤œè¨¼
  const verifyStoreCode = async (code: string) => {
    const { data, error } = await supabase
      .from('stores')
      .select('*')
      .eq('store_code', code)
      .eq('status', 'active')
      .single()

    if (data && !error) {
      setStoreCodeValid(true)
      setStoreName(data.store_name)
    } else {
      setStoreCodeValid(false)
      setStoreName('')
    }
  }

  const handleRegister = async () => {
    // profilesãƒ†ãƒ¼ãƒ–ãƒ«ã«ç™»éŒ²
    const { error } = await supabase
      .from('profiles')
      .insert({
        id: user.id,
        store_code: storeCode,
        display_name: displayName,
        email: user.email,
        avatar_url: user.user_metadata.avatar_url
      })

    if (!error) {
      // ãƒ›ãƒ¼ãƒ ç”»é¢ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
      window.location.href = '/'
    }
  }

  return (
    <div className="max-w-md mx-auto p-8">
      <h2 className="text-2xl font-bold mb-6">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç™»éŒ²</h2>

      {/* Googleã‹ã‚‰å–å¾—ã—ãŸæƒ…å ± */}
      <div className="bg-gray-100 p-4 rounded mb-4">
        <img src={user.user_metadata.avatar_url} className="w-16 h-16 rounded-full" />
        <p className="font-semibold">{user.user_metadata.full_name}</p>
        <p className="text-sm text-gray-600">{user.email}</p>
      </div>

      {/* åº—èˆ—ã‚³ãƒ¼ãƒ‰å…¥åŠ› */}
      <div className="mb-4">
        <label className="block text-sm font-medium mb-2">
          åº—èˆ—ã‚³ãƒ¼ãƒ‰ï¼ˆå¿…é ˆï¼‰
        </label>
        <input
          type="text"
          placeholder="ä¾‹: STORE_001"
          value={storeCode}
          onChange={(e) => {
            setStoreCode(e.target.value)
            verifyStoreCode(e.target.value)
          }}
          className="w-full p-2 border rounded"
        />
        {storeCodeValid && (
          <p className="text-green-500 text-sm mt-1">
            âœ… {storeName} ã¨ã—ã¦ç™»éŒ²ã•ã‚Œã¾ã™
          </p>
        )}
        {storeCode && !storeCodeValid && (
          <p className="text-red-500 text-sm mt-1">
            âš ï¸ åº—èˆ—ã‚³ãƒ¼ãƒ‰ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“
          </p>
        )}
      </div>

      {/* è¡¨ç¤ºå */}
      <div className="mb-4">
        <label className="block text-sm font-medium mb-2">è¡¨ç¤ºå</label>
        <input
          type="text"
          value={displayName}
          onChange={(e) => setDisplayName(e.target.value)}
          className="w-full p-2 border rounded"
        />
      </div>

      <button
        onClick={handleRegister}
        disabled={!storeCodeValid || !displayName}
        className="w-full bg-primary text-white p-3 rounded disabled:opacity-50"
      >
        ç™»éŒ²å®Œäº†
      </button>
    </div>
  )
}
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆè¨­å®šå®Œäº†
- [ ] Googleãƒ­ã‚°ã‚¤ãƒ³å‹•ä½œç¢ºèª
- [ ] åº—èˆ—ã‚³ãƒ¼ãƒ‰æ¤œè¨¼å‹•ä½œç¢ºèª
- [ ] åˆå›ç™»éŒ²ãƒ•ãƒ­ãƒ¼å®Œäº†

---

### Day 6: æœ¬éƒ¨ç®¡ç†è€… - åº—èˆ—ã‚³ãƒ¼ãƒ‰ç™ºè¡ŒUI

#### ã‚¿ã‚¹ã‚¯1: ç®¡ç†è€…ãƒšãƒ¼ã‚¸ä½œæˆ

```tsx
// src/components/Admin/StoreManagement.tsx
import { useState, useEffect } from 'react'
import { supabase } from '@/lib/supabase'

export function StoreManagement() {
  const [stores, setStores] = useState([])
  const [newStore, setNewStore] = useState({
    store_code: '',
    store_name: '',
    region: ''
  })

  // åº—èˆ—ä¸€è¦§å–å¾—
  useEffect(() => {
    fetchStores()
  }, [])

  const fetchStores = async () => {
    const { data } = await supabase
      .from('stores')
      .select('*')
      .order('store_code')
    setStores(data || [])
  }

  // æ–°è¦åº—èˆ—è¿½åŠ 
  const handleAddStore = async () => {
    const { error } = await supabase
      .from('stores')
      .insert(newStore)

    if (!error) {
      setNewStore({ store_code: '', store_name: '', region: '' })
      fetchStores()
    }
  }

  // æ¬¡ã®åº—èˆ—ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ
  const generateNextCode = () => {
    const lastStore = stores[stores.length - 1]
    if (!lastStore) return 'STORE_001'

    const lastNumber = parseInt(lastStore.store_code.split('_')[1])
    const nextNumber = (lastNumber + 1).toString().padStart(3, '0')
    return `STORE_${nextNumber}`
  }

  return (
    <div className="max-w-4xl mx-auto p-8">
      <h2 className="text-2xl font-bold mb-6">åº—èˆ—ç®¡ç†</h2>

      {/* æ–°è¦åº—èˆ—è¿½åŠ  */}
      <div className="bg-white p-6 rounded-lg shadow mb-8">
        <h3 className="text-lg font-semibold mb-4">åº—èˆ—ã‚³ãƒ¼ãƒ‰ç™ºè¡Œ</h3>

        <div className="grid grid-cols-3 gap-4 mb-4">
          <div>
            <label className="block text-sm font-medium mb-1">åº—èˆ—ã‚³ãƒ¼ãƒ‰</label>
            <input
              type="text"
              value={newStore.store_code}
              onChange={(e) => setNewStore({...newStore, store_code: e.target.value})}
              placeholder={generateNextCode()}
              className="w-full p-2 border rounded"
            />
          </div>

          <div>
            <label className="block text-sm font-medium mb-1">åº—èˆ—å</label>
            <input
              type="text"
              value={newStore.store_name}
              onChange={(e) => setNewStore({...newStore, store_name: e.target.value})}
              placeholder="ä¾‹: æ±äº¬éŠ€åº§åº—"
              className="w-full p-2 border rounded"
            />
          </div>

          <div>
            <label className="block text-sm font-medium mb-1">ãƒªãƒ¼ã‚¸ãƒ§ãƒ³</label>
            <select
              value={newStore.region}
              onChange={(e) => setNewStore({...newStore, region: e.target.value})}
              className="w-full p-2 border rounded"
            >
              <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
              <option value="åŒ—æµ·é“">åŒ—æµ·é“</option>
              <option value="æ±åŒ—">æ±åŒ—</option>
              <option value="é–¢æ±">é–¢æ±</option>
              <option value="ä¸­éƒ¨">ä¸­éƒ¨</option>
              <option value="é–¢è¥¿">é–¢è¥¿</option>
              <option value="ä¸­å›½">ä¸­å›½</option>
              <option value="å››å›½">å››å›½</option>
              <option value="ä¹å·">ä¹å·</option>
            </select>
          </div>
        </div>

        <button
          onClick={handleAddStore}
          disabled={!newStore.store_code || !newStore.store_name}
          className="bg-primary text-white px-6 py-2 rounded disabled:opacity-50"
        >
          è¿½åŠ 
        </button>
      </div>

      {/* åº—èˆ—ä¸€è¦§ */}
      <div className="bg-white rounded-lg shadow overflow-hidden">
        <table className="w-full">
          <thead className="bg-gray-50">
            <tr>
              <th className="px-6 py-3 text-left">åº—èˆ—ã‚³ãƒ¼ãƒ‰</th>
              <th className="px-6 py-3 text-left">åº—èˆ—å</th>
              <th className="px-6 py-3 text-left">ãƒªãƒ¼ã‚¸ãƒ§ãƒ³</th>
              <th className="px-6 py-3 text-left">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
            </tr>
          </thead>
          <tbody>
            {stores.map(store => (
              <tr key={store.id} className="border-t">
                <td className="px-6 py-4">{store.store_code}</td>
                <td className="px-6 py-4">{store.store_name}</td>
                <td className="px-6 py-4">{store.region}</td>
                <td className="px-6 py-4">
                  <span className={`px-2 py-1 rounded text-sm ${
                    store.status === 'active'
                      ? 'bg-green-100 text-green-800'
                      : 'bg-gray-100 text-gray-800'
                  }`}>
                    {store.status === 'active' ? 'æœ‰åŠ¹' : 'ç„¡åŠ¹'}
                  </span>
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  )
}
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] åº—èˆ—ç®¡ç†ç”»é¢ä½œæˆ
- [ ] åº—èˆ—ã‚³ãƒ¼ãƒ‰ç™ºè¡Œæ©Ÿèƒ½å‹•ä½œç¢ºèª
- [ ] åº—èˆ—ä¸€è¦§è¡¨ç¤ºç¢ºèª

---

### Day 7: èªè¨¼çŠ¶æ…‹ç®¡ç† + ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### ã‚¿ã‚¹ã‚¯1: èªè¨¼çŠ¶æ…‹ç®¡ç†

```tsx
// src/contexts/AuthContext.tsx
import { createContext, useContext, useEffect, useState } from 'react'
import { supabase } from '@/lib/supabase'
import type { User } from '@supabase/supabase-js'

interface AuthContextType {
  user: User | null
  profile: Profile | null
  loading: boolean
  signOut: () => Promise<void>
}

const AuthContext = createContext<AuthContextType>({} as AuthContextType)

export function AuthProvider({ children }: { children: React.ReactNode }) {
  const [user, setUser] = useState<User | null>(null)
  const [profile, setProfile] = useState<Profile | null>(null)
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    // åˆæœŸã‚»ãƒƒã‚·ãƒ§ãƒ³å–å¾—
    supabase.auth.getSession().then(({ data: { session } }) => {
      setUser(session?.user ?? null)
      if (session?.user) {
        fetchProfile(session.user.id)
      }
      setLoading(false)
    })

    // èªè¨¼çŠ¶æ…‹å¤‰æ›´ã‚’ç›£è¦–
    const { data: { subscription } } = supabase.auth.onAuthStateChange(
      (_event, session) => {
        setUser(session?.user ?? null)
        if (session?.user) {
          fetchProfile(session.user.id)
        }
      }
    )

    return () => subscription.unsubscribe()
  }, [])

  const fetchProfile = async (userId: string) => {
    const { data } = await supabase
      .from('profiles')
      .select('*')
      .eq('id', userId)
      .single()
    setProfile(data)
  }

  const signOut = async () => {
    await supabase.auth.signOut()
    setUser(null)
    setProfile(null)
  }

  return (
    <AuthContext.Provider value={{ user, profile, loading, signOut }}>
      {children}
    </AuthContext.Provider>
  )
}

export const useAuth = () => useContext(AuthContext)
```

#### ã‚¿ã‚¹ã‚¯2: ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š

```tsx
// src/App.tsx
import { BrowserRouter, Routes, Route, Navigate } from 'react-router-dom'
import { AuthProvider, useAuth } from '@/contexts/AuthContext'
import { LoginPage } from '@/components/Auth/LoginPage'
import { RegisterPage } from '@/components/Auth/RegisterPage'
import { HomePage } from '@/components/HomePage'
import { StoreManagement } from '@/components/Admin/StoreManagement'

function ProtectedRoute({ children }: { children: React.ReactNode }) {
  const { user, profile, loading } = useAuth()

  if (loading) return <div>Loading...</div>
  if (!user) return <Navigate to="/login" />
  if (!profile) return <Navigate to="/register" />

  return <>{children}</>
}

function AdminRoute({ children }: { children: React.ReactNode }) {
  const { profile } = useAuth()

  if (profile?.role !== 'admin') return <Navigate to="/" />

  return <>{children}</>
}

export default function App() {
  return (
    <BrowserRouter>
      <AuthProvider>
        <Routes>
          <Route path="/login" element={<LoginPage />} />
          <Route path="/register" element={<RegisterPage />} />

          <Route path="/" element={
            <ProtectedRoute>
              <HomePage />
            </ProtectedRoute>
          } />

          <Route path="/admin/stores" element={
            <ProtectedRoute>
              <AdminRoute>
                <StoreManagement />
              </AdminRoute>
            </ProtectedRoute>
          } />
        </Routes>
      </AuthProvider>
    </BrowserRouter>
  )
}
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] èªè¨¼çŠ¶æ…‹ç®¡ç†å®Ÿè£…
- [ ] ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®šå®Œäº†
- [ ] æœªãƒ­ã‚°ã‚¤ãƒ³æ™‚ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆç¢ºèª
- [ ] ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯ç¢ºèª

---

### Week 1ã¾ã¨ã‚ & ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ

#### å®Œæˆã™ã¹ãæ©Ÿèƒ½

- [x] Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
- [x] Google OAuthè¨­å®š
- [x] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆãƒ»æ§‹ç¯‰
- [x] RLSè¨­å®š
- [x] Googleèªè¨¼UI
- [x] åº—èˆ—ã‚³ãƒ¼ãƒ‰å…¥åŠ›ãƒ•ãƒ­ãƒ¼
- [x] åº—èˆ—ç®¡ç†ç”»é¢

#### å‹•ä½œç¢ºèª

```
ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª:
1. Googleã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§ãƒ­ã‚°ã‚¤ãƒ³
2. åº—èˆ—ã‚³ãƒ¼ãƒ‰ã€ŒSTORE_001ã€ã‚’å…¥åŠ›
3. åå‰ã‚’å…¥åŠ›ã—ã¦ç™»éŒ²å®Œäº†
4. ãƒ›ãƒ¼ãƒ ç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹
5. ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§åº—èˆ—ç®¡ç†ç”»é¢ã«ã‚¢ã‚¯ã‚»ã‚¹
6. æ–°è¦åº—èˆ—ã€ŒSTORE_004ã€ã‚’è¿½åŠ 
```

#### æˆæœç‰©

âœ… èªè¨¼ä»˜ãã‚¢ãƒ—ãƒªï¼ˆåº—èˆ—ã‚³ãƒ¼ãƒ‰å¿…é ˆï¼‰

**æ¬¡é€±**: Week 2 - 6ã‚·ãƒŠãƒªã‚ªæ§‹ç¯‰ + éŸ³å£°ãƒ‡ãƒ¼ã‚¿å‡¦ç†

---

## ğŸ“… Week 2: 6ã‚·ãƒŠãƒªã‚ªæ§‹ç¯‰ + éŸ³å£°ãƒ‡ãƒ¼ã‚¿å‡¦ç†

**ç›®æ¨™**: 6ã‚·ãƒŠãƒªã‚ª + RAGãƒ‡ãƒ¼ã‚¿600-800ä»¶

### Day 1-2: 6ã‚·ãƒŠãƒªã‚ªã®JSONä½œæˆ

#### ã‚¿ã‚¹ã‚¯1: ã‚·ãƒŠãƒªã‚ªãƒ•ã‚¡ã‚¤ãƒ«æº–å‚™

```bash
# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
mkdir -p scenarios
cd scenarios
```

#### ã‚¿ã‚¹ã‚¯2: meeting_1st.jsonï¼ˆ1æ¬¡é¢è«‡ï¼‰

```json
{
  "id": "meeting_1st",
  "title": "1æ¬¡é¢è«‡",
  "phase": "åˆå›æ¥è§¦",
  "persona": {
    "customer_role": "SNSæ‹…å½“è€… or çµŒå–¶è€…",
    "tone": "è­¦æˆ’å¿ƒã‚ã‚Šã€æ…é‡",
    "relationship": "åˆå¯¾é¢",
    "knowledge_level": "å‹•ç”»åˆ¶ä½œã«ã¤ã„ã¦ä¸æ˜",
    "decision_power": "æƒ…å ±åé›†æ®µéš",
    "pain_points": [
      "SNSã®åå¿œãŒæ‚ªã„",
      "å‹•ç”»åˆ¶ä½œã®çŸ¥è­˜ãŒãªã„",
      "äºˆç®—ãŒä¸æ˜ç¢º",
      "ä»–ç¤¾ã¨ã®æ¯”è¼ƒã‚’ã—ãŸã„"
    ]
  },
  "guidelines": [
    "æœ€åˆã¯è·é›¢ã‚’ç½®ã„ãŸå¯¾å¿œ",
    "å°‚é–€ç”¨èªã«ã¯ã€Œãã‚Œã£ã¦ä½•ã§ã™ã‹ï¼Ÿã€ã¨è³ªå•",
    "äºˆç®—ã®è©±ã«ã¯ã¾ã å…·ä½“çš„ã«ç­”ãˆãªã„",
    "ã€Œæ¤œè¨ã—ã¾ã™ã€ã€Œä»–ç¤¾ã‚‚è¦‹ã¦ã„ã¾ã™ã€ã¨ä¿ç•™",
    "ä¿¡é ¼é–¢ä¿‚ãŒãªã„ãŸã‚ã€æ·±ã„è©±ã¯ã—ãªã„"
  ],
  "expected_flow": [
    "æŒ¨æ‹¶ãƒ»è‡ªå·±ç´¹ä»‹",
    "ç›¸è«‡å†…å®¹ã®ç¢ºèª",
    "ç¾çŠ¶ã®SNSé‹ç”¨ãƒ’ã‚¢ãƒªãƒ³ã‚°",
    "èª²é¡Œã®è¡¨é¢çš„ãªå…±æœ‰",
    "æ¬¡å›é¢è«‡ã®ç´„æŸ"
  ],
  "utterances": [
    {
      "speaker": "å–¶æ¥­",
      "text": "æœ¬æ—¥ã¯ãŠæ™‚é–“ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚SNSå‹•ç”»åˆ¶ä½œã«ã”èˆˆå‘³ã‚’ãŠæŒã¡ã„ãŸã ã„ãŸã¨ã®ã“ã¨ã§ã€‚"
    },
    {
      "speaker": "ãŠå®¢æ§˜",
      "text": "ã¯ã„ã€‚SNSå‹•ç”»ã£ã¦ã€ã©ã‚Œãã‚‰ã„ã®äºˆç®—ã§ã§ãã‚‹ã‚“ã§ã—ã‚‡ã†ã‹ï¼Ÿ"
    },
    {
      "speaker": "å–¶æ¥­",
      "text": "ã”äºˆç®—ã¯ã©ã‚Œãã‚‰ã„ã§ãŠè€ƒãˆã§ã™ã‹ï¼Ÿ"
    },
    {
      "speaker": "ãŠå®¢æ§˜",
      "text": "ã¾ã åˆ†ã‹ã‚‰ãªãã¦...æ¤œè¨æ®µéšãªã‚“ã§ã™ã€‚"
    }
  ]
}
```

#### ã‚¿ã‚¹ã‚¯3: æ®‹ã‚Š5ã‚·ãƒŠãƒªã‚ªã‚‚åŒæ§˜ã«ä½œæˆ

- [ ] meeting_1_5.jsonï¼ˆ1.5æ¬¡é¢è«‡ï¼‰
- [ ] meeting_2nd.jsonï¼ˆ2æ¬¡é¢è«‡ï¼‰
- [ ] meeting_3rd.jsonï¼ˆ3æ¬¡é¢è«‡ï¼‰
- [ ] kickoff.jsonï¼ˆã‚­ãƒƒã‚¯ã‚ªãƒ•MTGï¼‰
- [ ] upsell.jsonï¼ˆè¿½åŠ å–¶æ¥­ï¼‰

#### ã‚¿ã‚¹ã‚¯4: index.jsonï¼ˆã‚·ãƒŠãƒªã‚ªä¸€è¦§ï¼‰

```json
{
  "default_id": "meeting_1st",
  "scenarios": [
    {
      "id": "meeting_1st",
      "file": "meeting_1st.json",
      "title": "1æ¬¡é¢è«‡",
      "description": "åˆå›æ¥è§¦ãƒ»é–¢ä¿‚æ§‹ç¯‰",
      "enabled": true,
      "tags": ["åˆå›", "ãƒ’ã‚¢ãƒªãƒ³ã‚°", "ä¿¡é ¼æ§‹ç¯‰"]
    },
    {
      "id": "meeting_1_5",
      "file": "meeting_1_5.json",
      "title": "1.5æ¬¡é¢è«‡",
      "description": "æƒ…å ±äº¤æ›ãƒ»ä¿¡é ¼æ§‹ç¯‰",
      "enabled": true,
      "tags": ["é–¢ä¿‚æ§‹ç¯‰", "è©³ç´°ç¢ºèª"]
    },
    {
      "id": "meeting_2nd",
      "file": "meeting_2nd.json",
      "title": "2æ¬¡é¢è«‡",
      "description": "ææ¡ˆãƒ»æ¤œè¨",
      "enabled": true,
      "tags": ["ææ¡ˆ", "äº‹ä¾‹ç´¹ä»‹"]
    },
    {
      "id": "meeting_3rd",
      "file": "meeting_3rd.json",
      "title": "3æ¬¡é¢è«‡",
      "description": "ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°",
      "enabled": true,
      "tags": ["ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ³ã‚°", "å¥‘ç´„"]
    },
    {
      "id": "kickoff",
      "file": "kickoff.json",
      "title": "ã‚­ãƒƒã‚¯ã‚ªãƒ•MTG",
      "description": "ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–‹å§‹",
      "enabled": true,
      "tags": ["ã‚­ãƒƒã‚¯ã‚ªãƒ•", "å”åŠ›é–¢ä¿‚"]
    },
    {
      "id": "upsell",
      "file": "upsell.json",
      "title": "è¿½åŠ å–¶æ¥­",
      "description": "æ—¢å­˜é¡§å®¢ã¸ã®ææ¡ˆ",
      "enabled": true,
      "tags": ["è¿½åŠ å–¶æ¥­", "ã‚¢ãƒƒãƒ—ã‚»ãƒ«"]
    }
  ]
}
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] 6ã‚·ãƒŠãƒªã‚ªãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆå®Œäº†
- [ ] index.jsonä½œæˆå®Œäº†
- [ ] JSONãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¤œè¨¼ï¼ˆhttps://jsonlint.comï¼‰

---

### Day 3-4: éŸ³å£°ãƒ‡ãƒ¼ã‚¿å‡¦ç†ï¼ˆ30æœ¬ï¼‰

#### äº‹å‰æº–å‚™

```
éŸ³å£°ãƒ‡ãƒ¼ã‚¿ã®é…ç½®:
/audio_data/
â”œâ”€ meeting_1st/
â”‚  â”œâ”€ 1st_001.mp3 (30åˆ†)
â”‚  â”œâ”€ 1st_002.mp3 (30åˆ†)
â”‚  â”œâ”€ 1st_003.mp3 (30åˆ†)
â”‚  â”œâ”€ 1st_004.mp3 (30åˆ†)
â”‚  â””â”€ 1st_005.mp3 (30åˆ†)
â”œâ”€ meeting_1_5/
â”‚  â””â”€ ...ï¼ˆ5æœ¬ï¼‰
â”œâ”€ meeting_2nd/
â”‚  â””â”€ ...ï¼ˆ5æœ¬ï¼‰
â”œâ”€ meeting_3rd/
â”‚  â””â”€ ...ï¼ˆ5æœ¬ï¼‰
â”œâ”€ kickoff/
â”‚  â””â”€ ...ï¼ˆ5æœ¬ï¼‰
â””â”€ upsell/
   â””â”€ ...ï¼ˆ5æœ¬ï¼‰
```

#### ã‚¿ã‚¹ã‚¯1: Whisperæ–‡å­—èµ·ã“ã—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```python
# tools/transcribe_audio.py
import os
from openai import OpenAI
from pathlib import Path
import json

client = OpenAI()

def transcribe_audio_file(audio_path: str) -> str:
    """éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’Whisper APIã§æ–‡å­—èµ·ã“ã—"""
    with open(audio_path, 'rb') as audio_file:
        transcript = client.audio.transcriptions.create(
            model="whisper-1",
            file=audio_file,
            language="ja"
        )
    return transcript.text

def process_scenario_folder(scenario_folder: str, output_folder: str):
    """ã‚·ãƒŠãƒªã‚ªãƒ•ã‚©ãƒ«ãƒ€å†…ã®å…¨éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‡¦ç†"""
    audio_files = sorted(Path(scenario_folder).glob('*.mp3'))

    for audio_file in audio_files:
        print(f"Processing: {audio_file.name}")

        # æ–‡å­—èµ·ã“ã—
        transcript = transcribe_audio_file(str(audio_file))

        # çµæœã‚’ä¿å­˜
        output_path = Path(output_folder) / f"{audio_file.stem}.txt"
        with open(output_path, 'w', encoding='utf-8') as f:
            f.write(transcript)

        print(f"Saved: {output_path}")

# å®Ÿè¡Œ
scenarios = [
    'meeting_1st',
    'meeting_1_5',
    'meeting_2nd',
    'meeting_3rd',
    'kickoff',
    'upsell'
]

for scenario in scenarios:
    print(f"\n=== {scenario} ===")
    process_scenario_folder(
        f'audio_data/{scenario}',
        f'transcripts/{scenario}'
    )
```

#### ã‚¿ã‚¹ã‚¯2: è©±è€…åˆ†é›¢ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```python
# tools/speaker_diarization.py
import re
from openai import OpenAI

client = OpenAI()

def separate_speakers_with_gpt(transcript: str, scenario_id: str) -> list:
    """GPT-4ã§è©±è€…åˆ†é›¢"""

    prompt = f"""
ä»¥ä¸‹ã¯SNSå‹•ç”»åˆ¶ä½œã®ç„¡æ–™ç›¸è«‡ã®æ–‡å­—èµ·ã“ã—ã§ã™ã€‚
ã‚·ãƒŠãƒªã‚ª: {scenario_id}

æ–‡å­—èµ·ã“ã—:
{transcript}

ã“ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å–¶æ¥­ï¼ˆç›¸è«‡å“¡ï¼‰ã¨é¡§å®¢ï¼ˆç›¸è«‡è€…ï¼‰ã®ç™ºè¨€ã«åˆ†é›¢ã—ã¦ãã ã•ã„ã€‚
å„ç™ºè¨€ã‚’ä»¥ä¸‹ã®JSONå½¢å¼ã§å‡ºåŠ›ã—ã¦ãã ã•ã„:

[
  {{"speaker": "å–¶æ¥­", "text": "ç™ºè¨€å†…å®¹"}},
  {{"speaker": "é¡§å®¢", "text": "ç™ºè¨€å†…å®¹"}}
]
"""

    response = client.chat.completions.create(
        model="gpt-4",
        messages=[
            {"role": "system", "content": "ã‚ãªãŸã¯ä¼šè©±ã®è©±è€…åˆ†é›¢ã‚’è¡Œã†å°‚é–€å®¶ã§ã™ã€‚"},
            {"role": "user", "content": prompt}
        ],
        temperature=0
    )

    # JSONæŠ½å‡º
    content = response.choices[0].message.content
    json_match = re.search(r'\[.*\]', content, re.DOTALL)
    if json_match:
        return json.loads(json_match.group())
    return []

# å®Ÿè¡Œä¾‹
transcript_path = 'transcripts/meeting_1st/1st_001.txt'
with open(transcript_path, 'r', encoding='utf-8') as f:
    transcript = f.read()

separated = separate_speakers_with_gpt(transcript, 'meeting_1st')

# ä¿å­˜
output_path = 'separated/meeting_1st/1st_001.json'
with open(output_path, 'w', encoding='utf-8') as f:
    json.dump(separated, f, ensure_ascii=False, indent=2)
```

#### ã‚¿ã‚¹ã‚¯3: ã‚¿ã‚°ä»˜ã‘ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```python
# tools/tag_conversations.py
def tag_utterances(utterances: list, scenario_id: str) -> list:
    """ç™ºè¨€ã«ã‚¿ã‚°ã‚’ä»˜ä¸"""

    for i, utterance in enumerate(utterances):
        if utterance['speaker'] == 'é¡§å®¢':
            # ã‚¿ã‚°ä»˜ã‘
            text = utterance['text'].lower()
            tags = []

            # ã‚·ãƒ¼ãƒ³åˆ¤å®š
            if any(word in text for word in ['ã“ã‚“ã«ã¡ã¯', 'ã‚ˆã‚ã—ã', 'åˆã‚ã¾ã—ã¦']):
                tags.append('æŒ¨æ‹¶')
            if any(word in text for word in ['äºˆç®—', 'è²»ç”¨', 'ä¾¡æ ¼', 'ãŠé‡‘']):
                tags.append('äºˆç®—')
            if any(word in text for word in ['æœŸé–“', 'ã„ã¤', 'ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«']):
                tags.append('æœŸé–“')
            if any(word in text for word in ['äº‹ä¾‹', 'å®Ÿç¸¾', 'ä»–ã®ä¼šç¤¾']):
                tags.append('äº‹ä¾‹')
            if any(word in text for word in ['æ¤œè¨', 'è€ƒãˆ', 'ç›¸è«‡']):
                tags.append('æ¤œè¨')

            # æ„Ÿæƒ…åˆ¤å®š
            emotion = 'neutral'
            if any(word in text for word in ['ä¸å®‰', 'å¿ƒé…', 'å¤§ä¸ˆå¤«']):
                emotion = 'ä¸å®‰'
            if any(word in text for word in ['èˆˆå‘³', 'è‰¯ã„', 'ç´ æ™´ã‚‰ã—ã„']):
                emotion = 'èˆˆå‘³'
            if any(word in text for word in ['å³ã—ã„', 'é›£ã—ã„', 'ç„¡ç†']):
                emotion = 'æ‡¸å¿µ'

            # é–¢ä¿‚æ€§ãƒ¬ãƒ™ãƒ«ï¼ˆã‚·ãƒŠãƒªã‚ªã«åŸºã¥ãï¼‰
            relationship_level = {
                'meeting_1st': 1,
                'meeting_1_5': 2,
                'meeting_2nd': 3,
                'meeting_3rd': 4,
                'kickoff': 5,
                'upsell': 5
            }.get(scenario_id, 1)

            # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è¿½åŠ 
            utterance['scenario_id'] = scenario_id
            utterance['tags'] = tags
            utterance['emotion'] = emotion
            utterance['relationship_level'] = relationship_level
            utterance['index'] = i

    return [u for u in utterances if u['speaker'] == 'é¡§å®¢']
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] 30æœ¬å…¨ã¦ã®éŸ³å£°ã‚’æ–‡å­—èµ·ã“ã—
- [ ] è©±è€…åˆ†é›¢å®Œäº†
- [ ] ã‚¿ã‚°ä»˜ã‘å®Œäº†
- [ ] JSONå½¢å¼ã§ä¿å­˜

---

### Day 5: RAGã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ§‹ç¯‰

#### ã‚¿ã‚¹ã‚¯1: é¡§å®¢ç™ºè¨€ã®æŠ½å‡ºãƒ»çµ±åˆ

```python
# tools/build_rag_index.py
import json
from pathlib import Path
from openai import OpenAI
import numpy as np
import faiss

client = OpenAI()

def load_all_customer_utterances() -> list:
    """å…¨ã‚·ãƒŠãƒªã‚ªã®é¡§å®¢ç™ºè¨€ã‚’èª­ã¿è¾¼ã¿"""
    all_utterances = []

    scenarios = ['meeting_1st', 'meeting_1_5', 'meeting_2nd',
                 'meeting_3rd', 'kickoff', 'upsell']

    for scenario in scenarios:
        folder = Path(f'separated/{scenario}')
        for json_file in folder.glob('*.json'):
            with open(json_file, 'r', encoding='utf-8') as f:
                data = json.load(f)
                # é¡§å®¢ç™ºè¨€ã®ã¿æŠ½å‡º
                customer_utterances = [
                    u for u in data if u['speaker'] == 'é¡§å®¢'
                ]
                all_utterances.extend(customer_utterances)

    return all_utterances

def generate_embeddings(texts: list) -> np.ndarray:
    """ãƒ†ã‚­ã‚¹ãƒˆã®Embeddingã‚’ç”Ÿæˆ"""
    response = client.embeddings.create(
        model="text-embedding-3-large",
        input=texts
    )

    embeddings = np.array([
        item.embedding for item in response.data
    ], dtype=np.float32)

    return embeddings

def build_faiss_index(utterances: list):
    """FAISSã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’æ§‹ç¯‰"""

    # ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º
    texts = [u['text'] for u in utterances]

    # Embeddingç”Ÿæˆ
    print(f"Generating embeddings for {len(texts)} utterances...")
    embeddings = generate_embeddings(texts)

    # FAISSã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ
    dimension = embeddings.shape[1]  # 3072 for text-embedding-3-large
    index = faiss.IndexFlatL2(dimension)
    index.add(embeddings)

    # ä¿å­˜
    faiss.write_index(index, 'rag_index/rag_index.faiss')

    # ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä¿å­˜
    with open('rag_index/rag_metadata.json', 'w', encoding='utf-8') as f:
        json.dump(utterances, f, ensure_ascii=False, indent=2)

    print(f"FAISS index created with {len(texts)} entries")
    return index

# å®Ÿè¡Œ
utterances = load_all_customer_utterances()
print(f"Total customer utterances: {len(utterances)}")
build_faiss_index(utterances)
```

#### ã‚¿ã‚¹ã‚¯2: RAGæ¤œç´¢é–¢æ•°ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰çµ±åˆï¼‰

```python
# app.py ã«è¿½åŠ 
import faiss
import numpy as np

# ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
RAG_INDEX = None
RAG_METADATA = None

def load_rag_index():
    """RAGã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’èª­ã¿è¾¼ã¿"""
    global RAG_INDEX, RAG_METADATA

    try:
        RAG_INDEX = faiss.read_index('rag_index/rag_index.faiss')
        with open('rag_index/rag_metadata.json', 'r', encoding='utf-8') as f:
            RAG_METADATA = json.load(f)
        print(f"RAG index loaded: {len(RAG_METADATA)} entries")
    except Exception as e:
        print(f"RAG index not found: {e}")

def search_rag_by_scenario(query: str, scenario_id: str, top_k: int = 3):
    """ã‚·ãƒŠãƒªã‚ªåˆ¥RAGæ¤œç´¢"""

    # ã‚·ãƒŠãƒªã‚ªã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
    filtered_metadata = [
        (i, m) for i, m in enumerate(RAG_METADATA)
        if m.get('scenario_id') == scenario_id
    ]

    if not filtered_metadata:
        return []

    # ã‚¯ã‚¨ãƒªã®Embeddingç”Ÿæˆ
    response = client.embeddings.create(
        model="text-embedding-3-large",
        input=[query]
    )
    query_embedding = np.array([response.data[0].embedding], dtype=np.float32)

    # å…¨ä½“ã‹ã‚‰æ¤œç´¢
    distances, indices = RAG_INDEX.search(query_embedding, top_k * 3)

    # ã‚·ãƒŠãƒªã‚ªã«åˆè‡´ã™ã‚‹ã‚‚ã®ã ã‘æŠ½å‡º
    results = []
    for dist, idx in zip(distances[0], indices[0]):
        if RAG_METADATA[idx].get('scenario_id') == scenario_id:
            results.append({
                'text': RAG_METADATA[idx]['text'],
                'tags': RAG_METADATA[idx].get('tags', []),
                'emotion': RAG_METADATA[idx].get('emotion', ''),
                'distance': float(dist)
            })
            if len(results) >= top_k:
                break

    return results

# ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«èª­ã¿è¾¼ã¿
load_rag_index()
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] é¡§å®¢ç™ºè¨€600-800ä»¶æŠ½å‡º
- [ ] Embeddingç”Ÿæˆå®Œäº†
- [ ] FAISSã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ§‹ç¯‰å®Œäº†
- [ ] ã‚·ãƒŠãƒªã‚ªåˆ¥æ¤œç´¢å‹•ä½œç¢ºèª

---

### Day 6-7: ã‚·ãƒŠãƒªã‚ªåˆ¥æ¤œç´¢æ©Ÿèƒ½ã®å®Ÿè£…

#### ã‚¿ã‚¹ã‚¯1: /api/chat ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ”¹ä¿®

```python
# app.py
@app.route('/api/chat', methods=['POST'])
def chat():
    data = request.json
    user_message = data.get('message')
    history = data.get('history', [])
    scenario_id = data.get('scenario_id', 'meeting_1st')

    # ã‚·ãƒŠãƒªã‚ªè©³ç´°ã‚’èª­ã¿è¾¼ã¿
    scenario = load_scenario_object(scenario_id)

    # RAGæ¤œç´¢ï¼ˆã‚·ãƒŠãƒªã‚ªåˆ¥ï¼‰
    rag_results = search_rag_by_scenario(user_message, scenario_id, top_k=3)

    # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ§‹ç¯‰
    system_prompt = f"""ã‚ãªãŸã¯SNSå‹•ç”»åˆ¶ä½œã®ç„¡æ–™ç›¸è«‡ã«æ¥ãŸç›¸è«‡è€…å½¹ã§ã™ã€‚

ã€ã‚·ãƒŠãƒªã‚ªã€‘
{scenario['title']} - {scenario['phase']}

ã€é¡§å®¢è¨­å®šã€‘
{json.dumps(scenario['persona'], ensure_ascii=False, indent=2)}

ã€è¿”ç­”ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³ã€‘
{chr(10).join('- ' + g for g in scenario['guidelines'])}

ã€éå»ã®å®Ÿä¾‹ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆé¡ä¼¼ã—ãŸç›¸è«‡è€…ã®ç™ºè¨€ï¼‰ã€‘
"""

    if rag_results:
        for i, result in enumerate(rag_results, 1):
            system_prompt += f"\n{i}. {result['text']}"

    # GPT-4o-miniå‘¼ã³å‡ºã—
    messages = [{"role": "system", "content": system_prompt}]

    # Few-shotï¼ˆã‚·ãƒŠãƒªã‚ªã®utterancesï¼‰
    for utterance in scenario.get('utterances', [])[:4]:
        role = "assistant" if utterance['speaker'] == 'ãŠå®¢æ§˜' else "user"
        messages.append({"role": role, "content": utterance['text']})

    # ä¼šè©±å±¥æ­´
    for msg in history:
        role = "assistant" if msg['speaker'] == 'ãŠå®¢æ§˜' else "user"
        messages.append({"role": role, "content": msg['text']})

    # ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
    messages.append({"role": "user", "content": user_message})

    response = client.chat.completions.create(
        model="gpt-4o-mini",
        messages=messages,
        temperature=0.7,
        max_tokens=200
    )

    ai_response = response.choices[0].message.content

    return jsonify({
        "success": True,
        "response": ai_response,
        "scenario_id": scenario_id,
        "rag_used": len(rag_results) > 0
    })
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] /api/chatã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆæ”¹ä¿®å®Œäº†
- [ ] ã‚·ãƒŠãƒªã‚ªåˆ¥RAGæ¤œç´¢å‹•ä½œç¢ºèª
- [ ] 6ã‚·ãƒŠãƒªã‚ªå…¨ã¦ã§å‹•ä½œç¢ºèª

---

### Week 2ã¾ã¨ã‚ & ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ

#### å®Œæˆã™ã¹ãæ©Ÿèƒ½

- [x] 6ã‚·ãƒŠãƒªã‚ªã®JSONä½œæˆ
- [x] éŸ³å£°ãƒ‡ãƒ¼ã‚¿30æœ¬ã®å‡¦ç†
- [x] RAGã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ§‹ç¯‰ï¼ˆ600-800ä»¶ï¼‰
- [x] ã‚·ãƒŠãƒªã‚ªåˆ¥æ¤œç´¢æ©Ÿèƒ½

#### å‹•ä½œç¢ºèª

```
ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª:
1. ã‚·ãƒŠãƒªã‚ªã€Œ1æ¬¡é¢è«‡ã€ã‚’é¸æŠ
2. ã€ŒSNSå‹•ç”»ã®äºˆç®—ã¯ã©ã‚Œãã‚‰ã„ã§ã™ã‹ï¼Ÿã€ã¨è³ªå•
3. AIç›¸è«‡è€…ãŒã€Œ1æ¬¡é¢è«‡ã€ã®é›°å›²æ°—ã§å¿œç­”
   ï¼ˆè­¦æˆ’å¿ƒã‚ã‚Šã€æ…é‡ãªè¿”ç­”ï¼‰
4. ã‚·ãƒŠãƒªã‚ªã€Œè¿½åŠ å–¶æ¥­ã€ã«åˆ‡ã‚Šæ›¿ãˆ
5. åŒã˜è³ªå•ã‚’ã™ã‚‹
6. AIç›¸è«‡è€…ãŒã€Œè¿½åŠ å–¶æ¥­ã€ã®é›°å›²æ°—ã§å¿œç­”
   ï¼ˆãƒ•ãƒ©ãƒ³ã‚¯ã€è¦ªã—ã¿ã‚„ã™ã„è¿”ç­”ï¼‰
```

#### æˆæœç‰©

âœ… 6ã‚·ãƒŠãƒªã‚ª + RAGãƒ‡ãƒ¼ã‚¿600-800ä»¶

**æ¬¡é€±**: Week 3 - ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–

---

## ğŸ“… Week 3: ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ– + ã‚·ãƒŠãƒªã‚ªåˆ‡æ›¿UI

**ç›®æ¨™**: ãƒ‡ãƒ¼ã‚¿ãŒæ®‹ã‚‹ã‚¢ãƒ—ãƒªï¼ˆ6ã‚·ãƒŠãƒªã‚ªå¯¾å¿œï¼‰

### Day 1-2: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ - Supabaseçµ±åˆ

#### ã‚¿ã‚¹ã‚¯1: Supabase Pythonã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ

```bash
# ä¾å­˜é–¢ä¿‚è¿½åŠ 
pip install supabase
```

```python
# app.py
from supabase import create_client, Client
import os

# Supabaseã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆæœŸåŒ–
SUPABASE_URL = os.getenv('SUPABASE_URL')
SUPABASE_KEY = os.getenv('SUPABASE_SERVICE_ROLE_KEY')
supabase: Client = create_client(SUPABASE_URL, SUPABASE_KEY)
```

#### ã‚¿ã‚¹ã‚¯2: ä¼šè©±å±¥æ­´ä¿å­˜API

```python
# app.py
@app.route('/api/conversations/save', methods=['POST'])
def save_conversation():
    """ä¼šè©±å±¥æ­´ã‚’ä¿å­˜"""
    data = request.json

    # ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£
    user_id = data.get('user_id')
    store_id = data.get('store_id')
    scenario_id = data.get('scenario_id')
    scenario_title = data.get('scenario_title')
    messages = data.get('messages')  # [{speaker, text, timestamp}]
    duration_seconds = data.get('duration_seconds')

    # Supabaseã«ä¿å­˜
    result = supabase.table('conversations').insert({
        'user_id': user_id,
        'store_id': store_id,
        'scenario_id': scenario_id,
        'scenario_title': scenario_title,
        'messages': messages,
        'duration_seconds': duration_seconds
    }).execute()

    return jsonify({
        "success": True,
        "conversation_id": result.data[0]['id']
    })

@app.route('/api/conversations', methods=['GET'])
def get_conversations():
    """ä¼šè©±å±¥æ­´ã‚’å–å¾—"""
    user_id = request.args.get('user_id')
    scenario_id = request.args.get('scenario_id')  # ã‚ªãƒ—ã‚·ãƒ§ãƒ³

    query = supabase.table('conversations').select('*').eq('user_id', user_id)

    if scenario_id:
        query = query.eq('scenario_id', scenario_id)

    result = query.order('created_at', desc=True).execute()

    return jsonify({
        "success": True,
        "conversations": result.data
    })
```

#### ã‚¿ã‚¹ã‚¯3: è©•ä¾¡å±¥æ­´ä¿å­˜API

```python
# app.py
@app.route('/api/evaluations/save', methods=['POST'])
def save_evaluation():
    """è©•ä¾¡å±¥æ­´ã‚’ä¿å­˜"""
    data = request.json

    conversation_id = data.get('conversation_id')
    user_id = data.get('user_id')
    store_id = data.get('store_id')
    scenario_id = data.get('scenario_id')
    scores = data.get('scores')
    comments = data.get('comments')

    # ç·åˆã‚¹ã‚³ã‚¢è¨ˆç®—
    total_score = sum(scores.values())
    average_score = total_score / len(scores)

    result = supabase.table('evaluations').insert({
        'conversation_id': conversation_id,
        'user_id': user_id,
        'store_id': store_id,
        'scenario_id': scenario_id,
        'scores': scores,
        'total_score': total_score,
        'average_score': average_score,
        'comments': comments
    }).execute()

    return jsonify({
        "success": True,
        "evaluation_id": result.data[0]['id']
    })

@app.route('/api/evaluations', methods=['GET'])
def get_evaluations():
    """è©•ä¾¡å±¥æ­´ã‚’å–å¾—"""
    user_id = request.args.get('user_id')
    scenario_id = request.args.get('scenario_id')

    query = supabase.table('evaluations').select('*').eq('user_id', user_id)

    if scenario_id:
        query = query.eq('scenario_id', scenario_id)

    result = query.order('created_at', desc=True).execute()

    return jsonify({
        "success": True,
        "evaluations": result.data
    })
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] Supabase Pythonã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçµ±åˆ
- [ ] ä¼šè©±ä¿å­˜APIå‹•ä½œç¢ºèª
- [ ] è©•ä¾¡ä¿å­˜APIå‹•ä½œç¢ºèª

---

### Day 3-4: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ - è‡ªå‹•ä¿å­˜æ©Ÿèƒ½

#### ã‚¿ã‚¹ã‚¯1: ä¼šè©±çµ‚äº†æ™‚ã®è‡ªå‹•ä¿å­˜

```tsx
// src/App.tsx
import { useAuth } from '@/contexts/AuthContext'
import { supabase } from '@/lib/supabase'

export function App() {
  const { user, profile } = useAuth()
  const [messages, setMessages] = useState([])
  const [currentScenarioId, setCurrentScenarioId] = useState('meeting_1st')

  // ä¼šè©±ä¿å­˜é–¢æ•°
  const saveConversation = async () => {
    if (!messages.length) return

    const response = await fetch('/api/conversations/save', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        user_id: user.id,
        store_id: profile.store_id,
        scenario_id: currentScenarioId,
        scenario_title: scenarios.find(s => s.id === currentScenarioId)?.title,
        messages: messages.map(m => ({
          speaker: m.role === 'user' ? 'å–¶æ¥­' : 'é¡§å®¢',
          text: m.text,
          timestamp: m.timestamp
        })),
        duration_seconds: calculateDuration(messages)
      })
    })

    const data = await response.json()
    return data.conversation_id
  }

  // è¬›è©•è¡¨ç¤ºæ™‚ã«è‡ªå‹•ä¿å­˜
  const handleShowEvaluation = async () => {
    // ä¼šè©±ã‚’ä¿å­˜
    const conversationId = await saveConversation()

    // è¬›è©•ç”Ÿæˆ
    const evaluation = await getEvaluation(messages)

    // è¬›è©•ã‚’ä¿å­˜
    await fetch('/api/evaluations/save', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        conversation_id: conversationId,
        user_id: user.id,
        store_id: profile.store_id,
        scenario_id: currentScenarioId,
        scores: evaluation.scores,
        comments: evaluation.comments
      })
    })

    setShowEvaluation(true)
    setEvaluation(evaluation)
  }

  return (
    // ... UI
  )
}
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ä¼šè©±è‡ªå‹•ä¿å­˜å®Ÿè£…
- [ ] è©•ä¾¡è‡ªå‹•ä¿å­˜å®Ÿè£…
- [ ] ä¿å­˜æˆåŠŸãƒˆãƒ¼ã‚¹ãƒˆè¡¨ç¤º

---

### Day 5: ã‚·ãƒŠãƒªã‚ªé¸æŠUI

#### ã‚¿ã‚¹ã‚¯1: ãƒ˜ãƒƒãƒ€ãƒ¼ã«ã‚·ãƒŠãƒªã‚ªé¸æŠ

```tsx
// src/components/Header.tsx
import { Select } from '@/components/ui/Select'

export function Header({
  currentScenarioId,
  onScenarioChange
}: {
  currentScenarioId: string
  onScenarioChange: (id: string) => void
}) {
  const { profile, signOut } = useAuth()
  const [scenarios, setScenarios] = useState([])

  useEffect(() => {
    fetch('/api/scenarios')
      .then(res => res.json())
      .then(data => setScenarios(data.scenarios))
  }, [])

  return (
    <header className="flex items-center justify-between p-4 border-b">
      <div className="flex items-center gap-4">
        <img src={profile.avatar_url} className="w-10 h-10 rounded-full" />
        <div>
          <p className="font-semibold">{profile.display_name}</p>
          <p className="text-sm text-gray-600">{profile.store_name}</p>
        </div>
      </div>

      <div className="flex items-center gap-4">
        <Select
          value={currentScenarioId}
          onChange={(e) => onScenarioChange(e.target.value)}
          className="w-64"
        >
          {scenarios.map(scenario => (
            <option key={scenario.id} value={scenario.id}>
              {scenario.title} - {scenario.description}
            </option>
          ))}
        </Select>

        <button onClick={signOut} className="text-sm text-gray-600">
          ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
        </button>
      </div>
    </header>
  )
}
```

#### ã‚¿ã‚¹ã‚¯2: ã‚·ãƒŠãƒªã‚ªåˆ‡ã‚Šæ›¿ãˆæ™‚ã®å‡¦ç†

```tsx
// src/App.tsx
const handleScenarioChange = async (newScenarioId: string) => {
  // ç¾åœ¨ã®ä¼šè©±ã‚’ä¿å­˜ï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚Œã°ï¼‰
  if (messages.length > 0) {
    const shouldSave = confirm('ç¾åœ¨ã®ä¼šè©±ã‚’ä¿å­˜ã—ã¾ã™ã‹ï¼Ÿ')
    if (shouldSave) {
      await saveConversation()
    }
  }

  // ã‚·ãƒŠãƒªã‚ªå¤‰æ›´
  setCurrentScenarioId(newScenarioId)
  setMessages([])

  // æ–°ã—ã„ã‚·ãƒŠãƒªã‚ªã®æœ€åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—
  const scenarioData = await fetch(`/api/scenarios/${newScenarioId}`)
    .then(res => res.json())

  const firstCustomerMsg = scenarioData.scenario.utterances
    .find(u => u.speaker === 'ãŠå®¢æ§˜')

  if (firstCustomerMsg) {
    setMessages([{
      role: 'bot',
      text: firstCustomerMsg.text,
      timestamp: new Date().toISOString()
    }])
    speakText(firstCustomerMsg.text)
  }
}
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ã‚·ãƒŠãƒªã‚ªé¸æŠUIå®Ÿè£…
- [ ] ã‚·ãƒŠãƒªã‚ªåˆ‡ã‚Šæ›¿ãˆå‹•ä½œç¢ºèª
- [ ] ä¼šè©±ä¿å­˜ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°å®Ÿè£…

---

### Week 3ã¾ã¨ã‚ & ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ

#### å®Œæˆã™ã¹ãæ©Ÿèƒ½

- [x] Supabaseçµ±åˆï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰
- [x] ä¼šè©±è‡ªå‹•ä¿å­˜
- [x] è©•ä¾¡è‡ªå‹•ä¿å­˜
- [x] ã‚·ãƒŠãƒªã‚ªé¸æŠUI
- [x] ã‚·ãƒŠãƒªã‚ªåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½

#### å‹•ä½œç¢ºèª

```
ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª:
1. ã€Œ1æ¬¡é¢è«‡ã€ã§ãƒ­ãƒ¼ãƒ—ãƒ¬å®Ÿæ–½
2. è¬›è©•ã‚’è¡¨ç¤º
3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
4. ã€Œ2æ¬¡é¢è«‡ã€ã«åˆ‡ã‚Šæ›¿ãˆ
5. æ–°ã—ã„ä¼šè©±ãŒé–‹å§‹ã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèª
```

#### æˆæœç‰©

âœ… ãƒ‡ãƒ¼ã‚¿ãŒæ®‹ã‚‹ã‚¢ãƒ—ãƒªï¼ˆ6ã‚·ãƒŠãƒªã‚ªå¯¾å¿œï¼‰

**æ¬¡é€±**: Week 4 - å±¥æ­´é–²è¦§ + CSVå‡ºåŠ›

---

## ğŸ“… Week 4: å±¥æ­´é–²è¦§ + CSVå‡ºåŠ›

**ç›®æ¨™**: æˆé•·å¯è¦–åŒ–æ©Ÿèƒ½ï¼ˆå±¥æ­´ãƒ»ã‚°ãƒ©ãƒ•ãƒ»CSVï¼‰

### Day 1-2: å±¥æ­´é–²è¦§UI

#### ã‚¿ã‚¹ã‚¯1: å±¥æ­´ä¸€è¦§ãƒšãƒ¼ã‚¸

```tsx
// src/components/History/HistoryPage.tsx
import { useState, useEffect } from 'react'
import { useAuth } from '@/contexts/AuthContext'
import { format } from 'date-fns'
import { ja } from 'date-fns/locale'

export function HistoryPage() {
  const { user, profile } = useAuth()
  const [conversations, setConversations] = useState([])
  const [selectedScenario, setSelectedScenario] = useState('all')
  const [loading, setLoading] = useState(true)

  useEffect(() => {
    fetchHistory()
  }, [selectedScenario])

  const fetchHistory = async () => {
    setLoading(true)
    const params = new URLSearchParams({ user_id: user.id })
    if (selectedScenario !== 'all') {
      params.append('scenario_id', selectedScenario)
    }

    const response = await fetch(`/api/conversations?${params}`)
    const data = await response.json()

    // è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ã‚‚å–å¾—
    const evaluationsResponse = await fetch(`/api/evaluations?${params}`)
    const evaluationsData = await evaluationsResponse.json()

    // ä¼šè©±ã¨è©•ä¾¡ã‚’ãƒãƒ¼ã‚¸
    const merged = data.conversations.map(conv => {
      const evaluation = evaluationsData.evaluations.find(
        e => e.conversation_id === conv.id
      )
      return { ...conv, evaluation }
    })

    setConversations(merged)
    setLoading(false)
  }

  return (
    <div className="max-w-6xl mx-auto p-8">
      <div className="flex items-center justify-between mb-6">
        <h2 className="text-2xl font-bold">ç·´ç¿’å±¥æ­´</h2>

        {/* ã‚·ãƒŠãƒªã‚ªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */}
        <select
          value={selectedScenario}
          onChange={(e) => setSelectedScenario(e.target.value)}
          className="p-2 border rounded"
        >
          <option value="all">å…¨ã‚·ãƒŠãƒªã‚ª</option>
          <option value="meeting_1st">1æ¬¡é¢è«‡</option>
          <option value="meeting_1_5">1.5æ¬¡é¢è«‡</option>
          <option value="meeting_2nd">2æ¬¡é¢è«‡</option>
          <option value="meeting_3rd">3æ¬¡é¢è«‡</option>
          <option value="kickoff">ã‚­ãƒƒã‚¯ã‚ªãƒ•MTG</option>
          <option value="upsell">è¿½åŠ å–¶æ¥­</option>
        </select>
      </div>

      {loading ? (
        <div className="text-center py-12">èª­ã¿è¾¼ã¿ä¸­...</div>
      ) : (
        <div className="space-y-4">
          {conversations.map(conv => (
            <HistoryCard key={conv.id} conversation={conv} />
          ))}
        </div>
      )}
    </div>
  )
}

function HistoryCard({ conversation }) {
  const [expanded, setExpanded] = useState(false)

  return (
    <div className="bg-white rounded-lg shadow p-6">
      <div className="flex items-start justify-between">
        <div className="flex-1">
          <div className="flex items-center gap-3 mb-2">
            <span className="px-3 py-1 bg-primary/10 text-primary rounded-full text-sm">
              {conversation.scenario_title}
            </span>
            <span className="text-sm text-gray-500">
              {format(new Date(conversation.created_at), 'yyyy/MM/dd HH:mm', { locale: ja })}
            </span>
            <span className="text-sm text-gray-500">
              {Math.floor(conversation.duration_seconds / 60)}åˆ†{conversation.duration_seconds % 60}ç§’
            </span>
          </div>

          {conversation.evaluation && (
            <div className="flex items-center gap-4 mt-3">
              <div className="text-2xl font-bold text-primary">
                {conversation.evaluation.average_score.toFixed(1)}ç‚¹
              </div>
              <div className="flex gap-2">
                {Object.entries(conversation.evaluation.scores).map(([key, value]) => (
                  <div key={key} className="text-sm">
                    <span className="text-gray-600">{getScoreLabel(key)}:</span>
                    <span className="font-semibold ml-1">{value}ç‚¹</span>
                  </div>
                ))}
              </div>
            </div>
          )}
        </div>

        <button
          onClick={() => setExpanded(!expanded)}
          className="text-sm text-primary hover:underline"
        >
          {expanded ? 'é–‰ã˜ã‚‹' : 'è©³ç´°ã‚’è¦‹ã‚‹'}
        </button>
      </div>

      {expanded && (
        <div className="mt-6 border-t pt-4">
          <h4 className="font-semibold mb-3">ä¼šè©±å†…å®¹</h4>
          <div className="space-y-3 max-h-96 overflow-y-auto">
            {conversation.messages.map((msg, i) => (
              <div
                key={i}
                className={`p-3 rounded-lg ${
                  msg.speaker === 'å–¶æ¥­'
                    ? 'bg-blue-50 text-blue-900'
                    : 'bg-gray-50 text-gray-900'
                }`}
              >
                <div className="text-xs text-gray-500 mb-1">{msg.speaker}</div>
                <div>{msg.text}</div>
              </div>
            ))}
          </div>

          {conversation.evaluation && (
            <div className="mt-6 p-4 bg-yellow-50 rounded-lg">
              <h4 className="font-semibold mb-2">è¬›è©•</h4>
              <div className="space-y-2 text-sm">
                {Object.entries(conversation.evaluation.comments).map(([key, comment]) => (
                  <div key={key}>
                    <span className="font-semibold">{getScoreLabel(key)}:</span>
                    <p className="text-gray-700 mt-1">{comment}</p>
                  </div>
                ))}
              </div>
            </div>
          )}
        </div>
      )}
    </div>
  )
}

function getScoreLabel(key: string): string {
  const labels = {
    hearing: 'ãƒ’ã‚¢ãƒªãƒ³ã‚°åŠ›',
    empathy: 'å…±æ„ŸåŠ›',
    proposal: 'ææ¡ˆåŠ›',
    trust: 'ä¿¡é ¼æ§‹ç¯‰åŠ›'
  }
  return labels[key] || key
}
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] å±¥æ­´ä¸€è¦§UIå®Ÿè£…
- [ ] ã‚·ãƒŠãƒªã‚ªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å‹•ä½œç¢ºèª
- [ ] è©³ç´°è¡¨ç¤ºå‹•ä½œç¢ºèª

---

### Day 3: æˆé•·ã‚°ãƒ©ãƒ•è¡¨ç¤º

#### ã‚¿ã‚¹ã‚¯1: Chart.jsçµ±åˆ

```bash
npm install chart.js react-chartjs-2
```

```tsx
// src/components/History/GrowthChart.tsx
import { Line } from 'react-chartjs-2'
import {
  Chart as ChartJS,
  CategoryScale,
  LinearScale,
  PointElement,
  LineElement,
  Title,
  Tooltip,
  Legend
} from 'chart.js'

ChartJS.register(
  CategoryScale,
  LinearScale,
  PointElement,
  LineElement,
  Title,
  Tooltip,
  Legend
)

export function GrowthChart({ evaluations }) {
  const data = {
    labels: evaluations.map((e, i) => `${i + 1}å›ç›®`),
    datasets: [
      {
        label: 'ãƒ’ã‚¢ãƒªãƒ³ã‚°åŠ›',
        data: evaluations.map(e => e.scores.hearing),
        borderColor: 'rgb(255, 99, 132)',
        backgroundColor: 'rgba(255, 99, 132, 0.5)',
      },
      {
        label: 'å…±æ„ŸåŠ›',
        data: evaluations.map(e => e.scores.empathy),
        borderColor: 'rgb(54, 162, 235)',
        backgroundColor: 'rgba(54, 162, 235, 0.5)',
      },
      {
        label: 'ææ¡ˆåŠ›',
        data: evaluations.map(e => e.scores.proposal),
        borderColor: 'rgb(75, 192, 192)',
        backgroundColor: 'rgba(75, 192, 192, 0.5)',
      },
      {
        label: 'ä¿¡é ¼æ§‹ç¯‰åŠ›',
        data: evaluations.map(e => e.scores.trust),
        borderColor: 'rgb(153, 102, 255)',
        backgroundColor: 'rgba(153, 102, 255, 0.5)',
      },
    ],
  }

  const options = {
    responsive: true,
    plugins: {
      legend: {
        position: 'top' as const,
      },
      title: {
        display: true,
        text: 'ã‚¹ã‚­ãƒ«æˆé•·ã‚°ãƒ©ãƒ•',
      },
    },
    scales: {
      y: {
        min: 0,
        max: 100,
      },
    },
  }

  return <Line options={options} data={data} />
}
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] Chart.jsçµ±åˆå®Œäº†
- [ ] æˆé•·ã‚°ãƒ©ãƒ•è¡¨ç¤ºç¢ºèª
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œç¢ºèª

---

### Day 4-5: CSVå‡ºåŠ›æ©Ÿèƒ½

#### ã‚¿ã‚¹ã‚¯1: CSVå‡ºåŠ›API

```python
# app.py
import csv
from io import StringIO
from flask import Response

@app.route('/api/export/csv', methods=['GET'])
def export_csv():
    """è©•ä¾¡å±¥æ­´ã‚’CSVå‡ºåŠ›"""
    user_id = request.args.get('user_id')
    start_date = request.args.get('start_date')
    end_date = request.args.get('end_date')

    # ãƒ‡ãƒ¼ã‚¿å–å¾—
    query = supabase.table('evaluations')\
        .select('*, conversations(scenario_title, created_at, messages)')\
        .eq('user_id', user_id)

    if start_date:
        query = query.gte('created_at', start_date)
    if end_date:
        query = query.lte('created_at', end_date)

    result = query.order('created_at').execute()

    # CSVç”Ÿæˆ
    output = StringIO()
    writer = csv.writer(output)

    # ãƒ˜ãƒƒãƒ€ãƒ¼
    writer.writerow([
        'æ—¥æ™‚',
        'ã‚·ãƒŠãƒªã‚ª',
        'ãƒ’ã‚¢ãƒªãƒ³ã‚°åŠ›',
        'å…±æ„ŸåŠ›',
        'ææ¡ˆåŠ›',
        'ä¿¡é ¼æ§‹ç¯‰åŠ›',
        'å¹³å‡ç‚¹',
        'ä¼šè©±ã‚¿ãƒ¼ãƒ³æ•°'
    ])

    # ãƒ‡ãƒ¼ã‚¿è¡Œ
    for item in result.data:
        writer.writerow([
            item['created_at'],
            item['conversations']['scenario_title'],
            item['scores']['hearing'],
            item['scores']['empathy'],
            item['scores']['proposal'],
            item['scores']['trust'],
            item['average_score'],
            len(item['conversations']['messages'])
        ])

    output.seek(0)

    return Response(
        output.getvalue(),
        mimetype='text/csv',
        headers={
            'Content-Disposition': 'attachment; filename=roleplay_history.csv'
        }
    )
```

#### ã‚¿ã‚¹ã‚¯2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰CSVå‡ºåŠ›ãƒœã‚¿ãƒ³

```tsx
// src/components/History/HistoryPage.tsx
const handleExportCSV = async () => {
  const params = new URLSearchParams({ user_id: user.id })

  const response = await fetch(`/api/export/csv?${params}`)
  const blob = await response.blob()

  const url = window.URL.createObjectURL(blob)
  const a = document.createElement('a')
  a.href = url
  a.download = `roleplay_history_${format(new Date(), 'yyyyMMdd')}.csv`
  a.click()
  window.URL.revokeObjectURL(url)
}

// UIã«è¿½åŠ 
<button
  onClick={handleExportCSV}
  className="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600"
>
  CSVå‡ºåŠ›
</button>
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] CSVå‡ºåŠ›APIå®Ÿè£…
- [ ] ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãƒœã‚¿ãƒ³å®Ÿè£…
- [ ] CSVå½¢å¼ç¢ºèªï¼ˆExceläº’æ›ï¼‰

---

### Week 4ã¾ã¨ã‚

âœ… æˆé•·å¯è¦–åŒ–æ©Ÿèƒ½ï¼ˆå±¥æ­´ãƒ»ã‚°ãƒ©ãƒ•ãƒ»CSVï¼‰

**æ¬¡é€±**: Week 5 - è©•ä¾¡ç²¾åº¦å‘ä¸Š

---

## ğŸ“… Week 5: è©•ä¾¡ç²¾åº¦å‘ä¸Š

**ç›®æ¨™**: è¬›å¸«è©•ä¾¡80%ä¸€è‡´

### Day 1-2: Few-shotè©•ä¾¡ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæ”¹å–„

#### ã‚¿ã‚¹ã‚¯1: è©•ä¾¡ç”¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ

```python
# evaluation_prompts.py
EVALUATION_PROMPT_TEMPLATE = """
ã‚ãªãŸã¯SNSå‹•ç”»åˆ¶ä½œä¼šç¤¾ã®å–¶æ¥­ãƒˆãƒ¬ãƒ¼ãƒŠãƒ¼ã§ã™ã€‚
ä»¥ä¸‹ã®å–¶æ¥­ãƒ­ãƒ¼ãƒ—ãƒ¬ã‚’è©•ä¾¡ã—ã¦ãã ã•ã„ã€‚

ã€ã‚·ãƒŠãƒªã‚ªã€‘
{scenario_title} - {scenario_phase}

ã€è©•ä¾¡åŸºæº–ã€‘
1. ãƒ’ã‚¢ãƒªãƒ³ã‚°åŠ› (0-100ç‚¹)
   - ã‚ªãƒ¼ãƒ—ãƒ³ã‚¯ã‚¨ã‚¹ãƒãƒ§ãƒ³ã®ä½¿ç”¨
   - ç›¸æ‰‹ã®æœ¬éŸ³ã‚’å¼•ãå‡ºã›ã¦ã„ã‚‹ã‹
   - é©åˆ‡ãªç›¸æ§Œãƒ»ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³

2. å…±æ„ŸåŠ› (0-100ç‚¹)
   - ç›¸æ‰‹ã®ç«‹å ´ã«ç«‹ã£ãŸç™ºè¨€
   - æ„Ÿæƒ…ã«å¯„ã‚Šæ·»ã£ã¦ã„ã‚‹ã‹
   - ä¿¡é ¼é–¢ä¿‚æ§‹ç¯‰ã¸ã®é…æ…®

3. ææ¡ˆåŠ› (0-100ç‚¹)
   - èª²é¡Œã«å¯¾ã™ã‚‹é©åˆ‡ãªææ¡ˆ
   - å…·ä½“æ€§ãƒ»å®Ÿç¾å¯èƒ½æ€§
   - ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã®é©åˆ‡ã•

4. ä¿¡é ¼æ§‹ç¯‰åŠ› (0-100ç‚¹)
   - èª å®Ÿãªå¯¾å¿œ
   - å°‚é–€æ€§ã®æç¤º
   - é•·æœŸçš„é–¢ä¿‚æ€§ã¸ã®é…æ…®

ã€è‰¯ã„ä¾‹ï¼ˆ90ç‚¹ä»¥ä¸Šï¼‰ã€‘
å–¶æ¥­: ã€Œç¾åœ¨ã®SNSé‹ç”¨ã§ã€ä¸€ç•ªå›°ã£ã¦ã„ã‚‹ã“ã¨ã¯ä½•ã§ã™ã‹?ã€
é¡§å®¢: ã€ŒæŠ•ç¨¿ã—ã¦ã‚‚åå¿œãŒå°‘ãªãã¦...ã€
å–¶æ¥­: ã€Œãã‚Œã¯è¾›ã„ã§ã™ã‚ˆã­ã€‚ã©ã‚Œãã‚‰ã„æŠ•ç¨¿ã•ã‚Œã¦ã„ã¾ã™ã‹?ã€
â†’ ã‚ªãƒ¼ãƒ—ãƒ³ã‚¯ã‚¨ã‚¹ãƒãƒ§ãƒ³ã€å…±æ„Ÿã€æ·±æ˜ã‚ŠãŒé©åˆ‡

ã€æ‚ªã„ä¾‹ï¼ˆ50ç‚¹ä»¥ä¸‹ï¼‰ã€‘
å–¶æ¥­: ã€Œå¼Šç¤¾ã®ã‚µãƒ¼ãƒ“ã‚¹ã¯æœˆ10ä¸‡å††ã‹ã‚‰ã§ã™ã€‚ã„ã‹ãŒã§ã™ã‹?ã€
é¡§å®¢: ã€Œé«˜ã„ã§ã™ã­...ã€
å–¶æ¥­: ã€Œã§ã¯8ä¸‡å††ã§ã©ã†ã§ã™ã‹?ã€
â†’ ãƒ’ã‚¢ãƒªãƒ³ã‚°ä¸è¶³ã€ä¸€æ–¹çš„ãªææ¡ˆã€å€¤å¼•ãå…ˆè¡Œ

ã€ä¼šè©±å±¥æ­´ã€‘
{conversation_transcript}

ã€è©•ä¾¡å‡ºåŠ›å½¢å¼ã€‘
{{
  "scores": {{
    "hearing": 85,
    "empathy": 78,
    "proposal": 82,
    "trust": 90
  }},
  "comments": {{
    "hearing": "å…·ä½“çš„ãªã‚³ãƒ¡ãƒ³ãƒˆ...",
    "empathy": "å…·ä½“çš„ãªã‚³ãƒ¡ãƒ³ãƒˆ...",
    "proposal": "å…·ä½“çš„ãªã‚³ãƒ¡ãƒ³ãƒˆ...",
    "trust": "å…·ä½“çš„ãªã‚³ãƒ¡ãƒ³ãƒˆ..."
  }},
  "overall_feedback": "å…¨ä½“çš„ãªè¬›è©•..."
}}
"""

def generate_evaluation_prompt(conversation, scenario):
    """ä¼šè©±å±¥æ­´ã‹ã‚‰è©•ä¾¡ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç”Ÿæˆ"""

    transcript = "\n".join([
        f"{msg['speaker']}: {msg['text']}"
        for msg in conversation
    ])

    return EVALUATION_PROMPT_TEMPLATE.format(
        scenario_title=scenario['title'],
        scenario_phase=scenario['phase'],
        conversation_transcript=transcript
    )
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] è©•ä¾¡ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä½œæˆ
- [ ] Good/Badä¾‹ã®è¿½åŠ 
- [ ] Few-shotè©•ä¾¡ãƒ†ã‚¹ãƒˆ

---

### Day 3: GPT-4è©•ä¾¡ã‚¨ãƒ³ã‚¸ãƒ³çµ±åˆ

#### ã‚¿ã‚¹ã‚¯1: è©•ä¾¡APIæ”¹ä¿®

```python
# app.py
from evaluation_prompts import generate_evaluation_prompt
import json
import re

@app.route('/api/evaluate', methods=['POST'])
def evaluate():
    """GPT-4ã§è©•ä¾¡ã‚’ç”Ÿæˆ"""
    data = request.json
    messages = data.get('messages')
    scenario_id = data.get('scenario_id')

    # ã‚·ãƒŠãƒªã‚ªèª­ã¿è¾¼ã¿
    scenario = load_scenario_object(scenario_id)

    # ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
    prompt = generate_evaluation_prompt(messages, scenario)

    # GPT-4å‘¼ã³å‡ºã—
    response = client.chat.completions.create(
        model="gpt-4",
        messages=[
            {"role": "system", "content": "ã‚ãªãŸã¯å–¶æ¥­ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°ã®å°‚é–€å®¶ã§ã™ã€‚"},
            {"role": "user", "content": prompt}
        ],
        temperature=0.3,
        max_tokens=1500
    )

    # JSONæŠ½å‡º
    content = response.choices[0].message.content
    json_match = re.search(r'\{.*\}', content, re.DOTALL)

    if json_match:
        evaluation = json.loads(json_match.group())

        # å¹³å‡ç‚¹è¨ˆç®—
        scores = evaluation['scores']
        average = sum(scores.values()) / len(scores)

        return jsonify({
            "success": True,
            "evaluation": {
                **evaluation,
                "average_score": round(average, 2),
                "total_score": sum(scores.values())
            }
        })

    return jsonify({"success": False, "error": "è©•ä¾¡ç”Ÿæˆå¤±æ•—"}), 500
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] GPT-4è©•ä¾¡APIå®Ÿè£…
- [ ] JSONæŠ½å‡ºãƒ­ã‚¸ãƒƒã‚¯ç¢ºèª
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…

---

### Day 4-5: è©•ä¾¡ç²¾åº¦ãƒ†ã‚¹ãƒˆãƒ»ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°

#### ã‚¿ã‚¹ã‚¯1: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ä½œæˆ

```python
# tests/evaluation_test.py
import json

# è¬›å¸«ã«ã‚ˆã‚‹æ‰‹å‹•è©•ä¾¡ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚´ãƒ¼ãƒ«ãƒ‰æ¨™æº–ï¼‰
GOLD_STANDARD_EVALUATIONS = [
    {
        "conversation_id": "test_001",
        "scenario_id": "meeting_1st",
        "human_scores": {
            "hearing": 85,
            "empathy": 78,
            "proposal": 70,
            "trust": 82
        },
        "messages": [
            # ... ä¼šè©±ãƒ‡ãƒ¼ã‚¿
        ]
    },
    # ... 20-30ä»¶ã®ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
]

def calculate_accuracy(ai_scores, human_scores):
    """AIã¨äººé–“ã®è©•ä¾¡ã®ä¸€è‡´ç‡ã‚’è¨ˆç®—"""
    differences = []
    for key in ai_scores.keys():
        diff = abs(ai_scores[key] - human_scores[key])
        differences.append(diff)

    # 10ç‚¹ä»¥å†…ã®å·®ãªã‚‰æ­£è§£ã¨ã™ã‚‹
    accuracy = sum(1 for d in differences if d <= 10) / len(differences)
    avg_difference = sum(differences) / len(differences)

    return {
        "accuracy": accuracy,
        "average_difference": avg_difference
    }

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
for test in GOLD_STANDARD_EVALUATIONS:
    ai_evaluation = get_ai_evaluation(test['messages'], test['scenario_id'])
    result = calculate_accuracy(ai_evaluation['scores'], test['human_scores'])
    print(f"Test {test['conversation_id']}: Accuracy={result['accuracy']:.2%}")
```

#### ã‚¿ã‚¹ã‚¯2: è©•ä¾¡åŸºæº–ã®èª¿æ•´

```python
# ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°
# - Good/Badä¾‹ã‚’10ä»¶ãšã¤è¿½åŠ 
# - è©•ä¾¡è»¸ã®å®šç¾©ã‚’å…·ä½“åŒ–
# - ã‚·ãƒŠãƒªã‚ªåˆ¥ã®è©•ä¾¡åŸºæº–ã‚’è¿½åŠ 

# ç›®æ¨™: 80%ä»¥ä¸Šã®ä¸€è‡´ç‡
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿20ä»¶ä»¥ä¸Šä½œæˆ
- [ ] ç²¾åº¦ãƒ†ã‚¹ãƒˆå®Ÿæ–½
- [ ] 80%ä»¥ä¸Šã®ä¸€è‡´ç‡é”æˆ

---

### Week 5ã¾ã¨ã‚

âœ… è¬›å¸«è©•ä¾¡80%ä¸€è‡´

**æ¬¡é€±**: Week 6 - åº—èˆ—ç®¡ç†æ©Ÿèƒ½

---

## ğŸ“… Week 6: åº—èˆ—ç®¡ç†æ©Ÿèƒ½

**ç›®æ¨™**: ãƒ•ãƒ©ãƒ³ãƒãƒ£ã‚¤ã‚ºç®¡ç†æ©Ÿèƒ½

### Day 1-2: åº—èˆ—åˆ¥çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

#### ã‚¿ã‚¹ã‚¯1: çµ±è¨ˆAPI

```python
# app.py
@app.route('/api/admin/stats/store/<store_id>', methods=['GET'])
def get_store_stats(store_id):
    """åº—èˆ—åˆ¥çµ±è¨ˆã‚’å–å¾—"""

    # æ‰€å±ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°
    users_count = supabase.table('profiles')\
        .select('id', count='exact')\
        .eq('store_id', store_id)\
        .execute().count

    # ç·ç·´ç¿’å›æ•°
    conversations_count = supabase.table('conversations')\
        .select('id', count='exact')\
        .eq('store_id', store_id)\
        .execute().count

    # å¹³å‡ã‚¹ã‚³ã‚¢
    evaluations = supabase.table('evaluations')\
        .select('average_score')\
        .eq('store_id', store_id)\
        .execute()

    avg_score = sum(e['average_score'] for e in evaluations.data) / len(evaluations.data) if evaluations.data else 0

    # ã‚·ãƒŠãƒªã‚ªåˆ¥ç·´ç¿’å›æ•°
    scenario_stats = {}
    for scenario in ['meeting_1st', 'meeting_1_5', 'meeting_2nd', 'meeting_3rd', 'kickoff', 'upsell']:
        count = supabase.table('conversations')\
            .select('id', count='exact')\
            .eq('store_id', store_id)\
            .eq('scenario_id', scenario)\
            .execute().count
        scenario_stats[scenario] = count

    return jsonify({
        "success": True,
        "stats": {
            "users_count": users_count,
            "conversations_count": conversations_count,
            "average_score": round(avg_score, 2),
            "scenario_stats": scenario_stats
        }
    })
```

#### ã‚¿ã‚¹ã‚¯2: åº—èˆ—ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰UI

```tsx
// src/components/Admin/StoreDashboard.tsx
export function StoreDashboard({ storeId }) {
  const [stats, setStats] = useState(null)

  useEffect(() => {
    fetch(`/api/admin/stats/store/${storeId}`)
      .then(res => res.json())
      .then(data => setStats(data.stats))
  }, [storeId])

  if (!stats) return <div>èª­ã¿è¾¼ã¿ä¸­...</div>

  return (
    <div className="grid grid-cols-4 gap-6">
      <StatCard
        title="æ‰€å±ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°"
        value={stats.users_count}
        icon="ğŸ‘¥"
      />
      <StatCard
        title="ç·ç·´ç¿’å›æ•°"
        value={stats.conversations_count}
        icon="ğŸ’¬"
      />
      <StatCard
        title="å¹³å‡ã‚¹ã‚³ã‚¢"
        value={`${stats.average_score}ç‚¹`}
        icon="â­"
      />
      <StatCard
        title="ä»Šæœˆã®ç·´ç¿’å›æ•°"
        value={stats.this_month_count}
        icon="ğŸ“…"
      />

      <div className="col-span-4 bg-white p-6 rounded-lg shadow">
        <h3 className="text-lg font-semibold mb-4">ã‚·ãƒŠãƒªã‚ªåˆ¥ç·´ç¿’å›æ•°</h3>
        <BarChart data={stats.scenario_stats} />
      </div>
    </div>
  )
}
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] çµ±è¨ˆAPIå®Ÿè£…
- [ ] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰UIå®Ÿè£…
- [ ] ã‚°ãƒ©ãƒ•è¡¨ç¤ºç¢ºèª

---

### Day 3-4: æœ¬éƒ¨ç®¡ç†è€…æ©Ÿèƒ½

#### ã‚¿ã‚¹ã‚¯1: å…¨åº—èˆ—ãƒ©ãƒ³ã‚­ãƒ³ã‚°

```python
# app.py
@app.route('/api/admin/ranking', methods=['GET'])
def get_store_ranking():
    """å…¨åº—èˆ—ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°"""

    # å…¨åº—èˆ—ã®çµ±è¨ˆã‚’å–å¾—
    stores = supabase.table('stores').select('*').execute()

    ranking = []
    for store in stores.data:
        evaluations = supabase.table('evaluations')\
            .select('average_score')\
            .eq('store_id', store['id'])\
            .execute()

        avg_score = sum(e['average_score'] for e in evaluations.data) / len(evaluations.data) if evaluations.data else 0

        ranking.append({
            "store_code": store['store_code'],
            "store_name": store['store_name'],
            "region": store['region'],
            "average_score": round(avg_score, 2),
            "practice_count": len(evaluations.data)
        })

    # ã‚¹ã‚³ã‚¢é †ã«ã‚½ãƒ¼ãƒˆ
    ranking.sort(key=lambda x: x['average_score'], reverse=True)

    return jsonify({
        "success": True,
        "ranking": ranking
    })
```

#### ã‚¿ã‚¹ã‚¯2: ãƒ©ãƒ³ã‚­ãƒ³ã‚°UI

```tsx
// src/components/Admin/RankingPage.tsx
export function RankingPage() {
  const [ranking, setRanking] = useState([])

  useEffect(() => {
    fetch('/api/admin/ranking')
      .then(res => res.json())
      .then(data => setRanking(data.ranking))
  }, [])

  return (
    <div className="max-w-4xl mx-auto p-8">
      <h2 className="text-2xl font-bold mb-6">åº—èˆ—åˆ¥ãƒ©ãƒ³ã‚­ãƒ³ã‚°</h2>

      <table className="w-full bg-white rounded-lg shadow overflow-hidden">
        <thead className="bg-gray-50">
          <tr>
            <th className="px-6 py-3 text-left">é †ä½</th>
            <th className="px-6 py-3 text-left">åº—èˆ—</th>
            <th className="px-6 py-3 text-left">ãƒªãƒ¼ã‚¸ãƒ§ãƒ³</th>
            <th className="px-6 py-3 text-left">å¹³å‡ã‚¹ã‚³ã‚¢</th>
            <th className="px-6 py-3 text-left">ç·´ç¿’å›æ•°</th>
          </tr>
        </thead>
        <tbody>
          {ranking.map((store, index) => (
            <tr key={store.store_code} className="border-t">
              <td className="px-6 py-4">
                {index === 0 && 'ğŸ¥‡'}
                {index === 1 && 'ğŸ¥ˆ'}
                {index === 2 && 'ğŸ¥‰'}
                {index > 2 && `${index + 1}ä½`}
              </td>
              <td className="px-6 py-4">
                <div>
                  <div className="font-semibold">{store.store_name}</div>
                  <div className="text-sm text-gray-500">{store.store_code}</div>
                </div>
              </td>
              <td className="px-6 py-4">{store.region}</td>
              <td className="px-6 py-4">
                <span className="text-xl font-bold text-primary">
                  {store.average_score}ç‚¹
                </span>
              </td>
              <td className="px-6 py-4">{store.practice_count}å›</td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  )
}
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ãƒ©ãƒ³ã‚­ãƒ³ã‚°APIå®Ÿè£…
- [ ] ãƒ©ãƒ³ã‚­ãƒ³ã‚°UIå®Ÿè£…
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ç¢ºèª

---

### Day 5: æ¨©é™ç®¡ç†ãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†

#### ã‚¿ã‚¹ã‚¯1: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§ãƒ»ç·¨é›†

```tsx
// src/components/Admin/UserManagement.tsx
export function UserManagement() {
  const [users, setUsers] = useState([])

  const fetchUsers = async () => {
    const { data } = await supabase
      .from('profiles')
      .select('*, stores(store_name)')
      .order('created_at', { ascending: false })
    setUsers(data)
  }

  const handleRoleChange = async (userId, newRole) => {
    await supabase
      .from('profiles')
      .update({ role: newRole })
      .eq('id', userId)

    fetchUsers()
  }

  return (
    <div className="max-w-6xl mx-auto p-8">
      <h2 className="text-2xl font-bold mb-6">ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†</h2>

      <table className="w-full bg-white rounded-lg shadow">
        <thead className="bg-gray-50">
          <tr>
            <th className="px-6 py-3 text-left">ãƒ¦ãƒ¼ã‚¶ãƒ¼</th>
            <th className="px-6 py-3 text-left">åº—èˆ—</th>
            <th className="px-6 py-3 text-left">æ¨©é™</th>
            <th className="px-6 py-3 text-left">æœ€çµ‚ãƒ­ã‚°ã‚¤ãƒ³</th>
            <th className="px-6 py-3 text-left">æ“ä½œ</th>
          </tr>
        </thead>
        <tbody>
          {users.map(user => (
            <tr key={user.id} className="border-t">
              <td className="px-6 py-4">
                <div className="flex items-center gap-3">
                  <img src={user.avatar_url} className="w-10 h-10 rounded-full" />
                  <div>
                    <div className="font-semibold">{user.display_name}</div>
                    <div className="text-sm text-gray-500">{user.email}</div>
                  </div>
                </div>
              </td>
              <td className="px-6 py-4">{user.stores?.store_name}</td>
              <td className="px-6 py-4">
                <select
                  value={user.role}
                  onChange={(e) => handleRoleChange(user.id, e.target.value)}
                  className="p-2 border rounded"
                >
                  <option value="user">ä¸€èˆ¬</option>
                  <option value="manager">åº—èˆ—ç®¡ç†è€…</option>
                  <option value="admin">æœ¬éƒ¨ç®¡ç†è€…</option>
                </select>
              </td>
              <td className="px-6 py-4">
                {user.last_active_at ? format(new Date(user.last_active_at), 'yyyy/MM/dd HH:mm') : '-'}
              </td>
              <td className="px-6 py-4">
                <button className="text-red-500 hover:underline">å‰Šé™¤</button>
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  )
}
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ä¸€è¦§UIå®Ÿè£…
- [ ] æ¨©é™å¤‰æ›´æ©Ÿèƒ½å®Ÿè£…
- [ ] RLSå‹•ä½œç¢ºèª

---

### Week 6ã¾ã¨ã‚

âœ… ãƒ•ãƒ©ãƒ³ãƒãƒ£ã‚¤ã‚ºç®¡ç†æ©Ÿèƒ½

**æ¬¡é€±**: Week 7 - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

---

## ğŸ“… Week 7: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

**ç›®æ¨™**: 100åº—èˆ—å¯¾å¿œå®Œäº†

### Day 1-2: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æœ€é©åŒ–

#### ã‚¿ã‚¹ã‚¯1: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°

```sql
-- é…ã„ã‚¯ã‚¨ãƒªã‚’ç‰¹å®š
EXPLAIN ANALYZE
SELECT * FROM evaluations
WHERE store_id = 'xxx'
ORDER BY created_at DESC
LIMIT 10;

-- è¤‡åˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¿½åŠ 
CREATE INDEX idx_evaluations_store_date
ON evaluations(store_id, created_at DESC);

CREATE INDEX idx_conversations_user_scenario
ON conversations(user_id, scenario_id, created_at DESC);

-- ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ‹ãƒ³ã‚°ï¼ˆå¤§é‡ãƒ‡ãƒ¼ã‚¿å¯¾ç­–ï¼‰
CREATE TABLE conversations_2025 PARTITION OF conversations
FOR VALUES FROM ('2025-01-01') TO ('2026-01-01');
```

#### ã‚¿ã‚¹ã‚¯2: ã‚¯ã‚¨ãƒªæœ€é©åŒ–

```python
# app.py - N+1å•é¡Œã®è§£æ¶ˆ

# âŒ æ‚ªã„ä¾‹ï¼ˆN+1å•é¡Œï¼‰
conversations = supabase.table('conversations').select('*').execute()
for conv in conversations.data:
    evaluation = supabase.table('evaluations').select('*').eq('conversation_id', conv['id']).execute()

# âœ… è‰¯ã„ä¾‹ï¼ˆJOINï¼‰
conversations = supabase.table('conversations')\
    .select('*, evaluations(*)')\
    .execute()
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹è¿½åŠ å®Œäº†
- [ ] ã‚¯ã‚¨ãƒªå®Ÿè¡Œæ™‚é–“æ¸¬å®šï¼ˆ<100msç›®æ¨™ï¼‰
- [ ] N+1å•é¡Œè§£æ¶ˆç¢ºèª

---

### Day 3: ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

#### ã‚¿ã‚¹ã‚¯1: Rediså°å…¥

```bash
# Redisã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆé–‹ç™ºç’°å¢ƒï¼‰
brew install redis
redis-server

# Pythonä¾å­˜é–¢ä¿‚
pip install redis
```

```python
# app.py
import redis
import json

# Redisæ¥ç¶š
redis_client = redis.Redis(
    host='localhost',
    port=6379,
    decode_responses=True
)

# RAGæ¤œç´¢çµæœã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥
def search_rag_with_cache(query: str, scenario_id: str, top_k: int = 3):
    cache_key = f"rag:{scenario_id}:{query[:50]}"

    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒã‚§ãƒƒã‚¯
    cached = redis_client.get(cache_key)
    if cached:
        return json.loads(cached)

    # RAGæ¤œç´¢å®Ÿè¡Œ
    results = search_rag_by_scenario(query, scenario_id, top_k)

    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ä¿å­˜ï¼ˆ1æ™‚é–“ï¼‰
    redis_client.setex(cache_key, 3600, json.dumps(results))

    return results

# ã‚·ãƒŠãƒªã‚ªãƒ‡ãƒ¼ã‚¿ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥
def load_scenario_with_cache(scenario_id: str):
    cache_key = f"scenario:{scenario_id}"

    cached = redis_client.get(cache_key)
    if cached:
        return json.loads(cached)

    scenario = load_scenario_object(scenario_id)
    redis_client.setex(cache_key, 86400, json.dumps(scenario))  # 24æ™‚é–“

    return scenario
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] Redisçµ±åˆå®Œäº†
- [ ] ã‚­ãƒ£ãƒƒã‚·ãƒ¥å‹•ä½œç¢ºèª
- [ ] ãƒ’ãƒƒãƒˆç‡æ¸¬å®šï¼ˆ70%ä»¥ä¸Šç›®æ¨™ï¼‰

---

### Day 4: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æœ€é©åŒ–

#### ã‚¿ã‚¹ã‚¯1: ã‚³ãƒ¼ãƒ‰åˆ†å‰²

```tsx
// src/App.tsx
import { lazy, Suspense } from 'react'

// é…å»¶ãƒ­ãƒ¼ãƒ‰
const HistoryPage = lazy(() => import('@/components/History/HistoryPage'))
const AdminDashboard = lazy(() => import('@/components/Admin/AdminDashboard'))

export default function App() {
  return (
    <Suspense fallback={<LoadingSpinner />}>
      <Routes>
        <Route path="/history" element={<HistoryPage />} />
        <Route path="/admin" element={<AdminDashboard />} />
      </Routes>
    </Suspense>
  )
}
```

#### ã‚¿ã‚¹ã‚¯2: ãƒ“ãƒ«ãƒ‰æœ€é©åŒ–

```bash
# vite.config.ts
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          'react-vendor': ['react', 'react-dom'],
          'chart-vendor': ['chart.js', 'react-chartjs-2'],
        }
      }
    },
    chunkSizeWarningLimit: 1000
  }
})

# ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œ
npm run build

# ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºç¢ºèª
npm run build -- --stats
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ã‚³ãƒ¼ãƒ‰åˆ†å‰²å®Ÿè£…
- [ ] ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºæ¸¬å®šï¼ˆ<500KBç›®æ¨™ï¼‰
- [ ] Lighthouseã‚¹ã‚³ã‚¢90ä»¥ä¸Š

---

### Day 5: è² è·ãƒ†ã‚¹ãƒˆ

#### ã‚¿ã‚¹ã‚¯1: Locustã«ã‚ˆã‚‹è² è·ãƒ†ã‚¹ãƒˆ

```python
# locustfile.py
from locust import HttpUser, task, between

class RoleplayUser(HttpUser):
    wait_time = between(1, 5)

    def on_start(self):
        # ãƒ­ã‚°ã‚¤ãƒ³
        self.client.post("/api/auth/login", json={
            "email": "test@example.com",
            "password": "test123"
        })

    @task(3)
    def send_message(self):
        self.client.post("/api/chat", json={
            "message": "SNSå‹•ç”»ã®äºˆç®—ã¯ã©ã‚Œãã‚‰ã„ã§ã™ã‹?",
            "scenario_id": "meeting_1st",
            "history": []
        })

    @task(1)
    def get_evaluation(self):
        self.client.post("/api/evaluate", json={
            "messages": [
                {"speaker": "å–¶æ¥­", "text": "ã“ã‚“ã«ã¡ã¯"},
                {"speaker": "é¡§å®¢", "text": "ã“ã‚“ã«ã¡ã¯"}
            ],
            "scenario_id": "meeting_1st"
        })

    @task(1)
    def get_history(self):
        self.client.get("/api/conversations?user_id=xxx")
```

```bash
# è² è·ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
locust -f locustfile.py --host=http://localhost:5000

# 100ãƒ¦ãƒ¼ã‚¶ãƒ¼åŒæ™‚æ¥ç¶šã§ãƒ†ã‚¹ãƒˆ
# ç›®æ¨™: ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ <1ç§’ã€ã‚¨ãƒ©ãƒ¼ç‡<1%
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] è² è·ãƒ†ã‚¹ãƒˆå®Ÿæ–½
- [ ] ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ç‰¹å®šãƒ»è§£æ¶ˆ
- [ ] 100åŒæ™‚æ¥ç¶šã‚¯ãƒªã‚¢

---

### Week 7ã¾ã¨ã‚

âœ… 100åº—èˆ—å¯¾å¿œå®Œäº†

**æ¬¡é€±**: Week 8 - ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤

---

## ğŸ“… Week 8: ãƒ†ã‚¹ãƒˆãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤

**ç›®æ¨™**: æœ¬ç•ªç¨¼åƒå¯èƒ½

### Day 1-2: E2Eãƒ†ã‚¹ãƒˆ

#### ã‚¿ã‚¹ã‚¯1: Playwrightçµ±åˆ

```bash
npm install -D @playwright/test
npx playwright install
```

```typescript
// tests/e2e/roleplay.spec.ts
import { test, expect } from '@playwright/test'

test.describe('ãƒ­ãƒ¼ãƒ—ãƒ¬ãƒ•ãƒ­ãƒ¼', () => {
  test('ãƒ­ã‚°ã‚¤ãƒ³ã‹ã‚‰è¬›è©•ã¾ã§ã®å®Œå…¨ãƒ•ãƒ­ãƒ¼', async ({ page }) => {
    // ãƒ­ã‚°ã‚¤ãƒ³
    await page.goto('http://localhost:5173/login')
    await page.click('button:has-text("Googleã§ãƒ­ã‚°ã‚¤ãƒ³")')

    // ä¼šè©±é–‹å§‹
    await page.waitForSelector('text=1æ¬¡é¢è«‡')
    await page.click('button:has-text("ä¼šè©±é–‹å§‹")')

    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡
    await page.fill('textarea', 'SNSå‹•ç”»ã®äºˆç®—ã¯ã©ã‚Œãã‚‰ã„ã§ã™ã‹?')
    await page.click('button:has-text("é€ä¿¡")')

    // AIå¿œç­”å¾…æ©Ÿ
    await page.waitForSelector('.bot-message')
    const botMessage = await page.textContent('.bot-message')
    expect(botMessage).toBeTruthy()

    // è¬›è©•è¡¨ç¤º
    await page.click('button:has-text("è¬›è©•ã‚’è¦‹ã‚‹")')
    await page.waitForSelector('text=ãƒ’ã‚¢ãƒªãƒ³ã‚°åŠ›')

    const score = await page.textContent('.average-score')
    expect(score).toMatch(/\d+ç‚¹/)
  })

  test('ã‚·ãƒŠãƒªã‚ªåˆ‡ã‚Šæ›¿ãˆ', async ({ page }) => {
    await page.goto('http://localhost:5173')

    // ã‚·ãƒŠãƒªã‚ªé¸æŠ
    await page.selectOption('select[name="scenario"]', 'meeting_2nd')

    // ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
    page.on('dialog', dialog => dialog.accept())

    // ã‚·ãƒŠãƒªã‚ªãŒå¤‰æ›´ã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèª
    await expect(page.locator('text=2æ¬¡é¢è«‡')).toBeVisible()
  })
})
```

```bash
# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
npx playwright test

# ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ãƒ¢ãƒ¼ãƒ‰OFFï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
npx playwright test --headed
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] E2Eãƒ†ã‚¹ãƒˆ10ã‚·ãƒŠãƒªã‚ªä»¥ä¸Šä½œæˆ
- [ ] å…¨ãƒ†ã‚¹ãƒˆãƒ‘ã‚¹
- [ ] CI/CDçµ±åˆ

---

### Day 3: ãƒ‡ãƒ—ãƒ­ã‚¤æº–å‚™

#### ã‚¿ã‚¹ã‚¯1: ç’°å¢ƒå¤‰æ•°ç®¡ç†

```bash
# .env.productionï¼ˆæœ¬ç•ªç”¨ï¼‰
VITE_SUPABASE_URL=https://xxx.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGc...

SUPABASE_SERVICE_ROLE_KEY=eyJhbGc...ï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã¿ï¼‰

OPENAI_API_KEY=sk-...

REDIS_URL=redis://...
```

#### ã‚¿ã‚¹ã‚¯2: Vercelè¨­å®šï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼‰

```bash
# Vercel CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g vercel

# ãƒ­ã‚°ã‚¤ãƒ³
vercel login

# ãƒ‡ãƒ—ãƒ­ã‚¤
vercel --prod

# ç’°å¢ƒå¤‰æ•°è¨­å®š
vercel env add VITE_SUPABASE_URL
vercel env add VITE_SUPABASE_ANON_KEY
```

#### ã‚¿ã‚¹ã‚¯3: Railwayè¨­å®šï¼ˆãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼‰

```yaml
# railway.toml
[build]
builder = "nixpacks"

[deploy]
startCommand = "gunicorn app:app"
healthcheckPath = "/health"
restartPolicyType = "on-failure"

[[services]]
name = "api"
port = 5000
```

```bash
# Railway CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g @railway/cli

# ãƒ­ã‚°ã‚¤ãƒ³
railway login

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
railway init

# ãƒ‡ãƒ—ãƒ­ã‚¤
railway up

# ç’°å¢ƒå¤‰æ•°è¨­å®š
railway variables set OPENAI_API_KEY=sk-...
railway variables set SUPABASE_URL=https://...
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ç’°å¢ƒå¤‰æ•°è¨­å®šå®Œäº†
- [ ] Vercelãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸ
- [ ] Railwayãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸ
- [ ] HTTPSè¨­å®šå®Œäº†

---

### Day 4: æœ¬ç•ªãƒ†ã‚¹ãƒˆ

#### ã‚¿ã‚¹ã‚¯1: ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆ

```bash
# æœ¬ç•ªç’°å¢ƒã§ã®å‹•ä½œç¢ºèª
1. ãƒ­ã‚°ã‚¤ãƒ³å‹•ä½œç¢ºèª
2. 6ã‚·ãƒŠãƒªã‚ªå…¨ã¦å‹•ä½œç¢ºèª
3. ä¼šè©±ä¿å­˜ç¢ºèª
4. è©•ä¾¡ç”Ÿæˆç¢ºèª
5. å±¥æ­´é–²è¦§ç¢ºèª
6. CSVå‡ºåŠ›ç¢ºèª
7. åº—èˆ—ç®¡ç†æ©Ÿèƒ½ç¢ºèª
```

#### ã‚¿ã‚¹ã‚¯2: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯

```bash
# SSL/TLSç¢ºèª
curl -I https://your-domain.com

# CORSè¨­å®šç¢ºèª
# Headersç¢ºèª
curl -H "Origin: https://evil.com" https://api.your-domain.com

# RLSå‹•ä½œç¢ºèª
# ä»–ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ‡ãƒ¼ã‚¿ãŒè¦‹ãˆãªã„ã“ã¨ã‚’ç¢ºèª
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] å…¨æ©Ÿèƒ½å‹•ä½œç¢ºèª
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯å®Œäº†
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆåˆæ ¼

---

### Day 5: ãƒªãƒªãƒ¼ã‚¹ãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™

#### ã‚¿ã‚¹ã‚¯1: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ä½œæˆ

```markdown
# SNSå‹•ç”»å–¶æ¥­ãƒ­ãƒ¼ãƒ—ãƒ¬ã‚·ã‚¹ãƒ†ãƒ  ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«

## 1. ãƒ­ã‚°ã‚¤ãƒ³æ–¹æ³•
1. https://your-app.vercel.app ã«ã‚¢ã‚¯ã‚»ã‚¹
2. ã€ŒGoogleã§ãƒ­ã‚°ã‚¤ãƒ³ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. åº—èˆ—ã‚³ãƒ¼ãƒ‰ï¼ˆSTORE_001ãªã©ï¼‰ã‚’å…¥åŠ›
4. åå‰ã‚’å…¥åŠ›ã—ã¦ç™»éŒ²å®Œäº†

## 2. ãƒ­ãƒ¼ãƒ—ãƒ¬å®Ÿæ–½æ–¹æ³•
1. ãƒ˜ãƒƒãƒ€ãƒ¼ã‹ã‚‰ã‚·ãƒŠãƒªã‚ªã‚’é¸æŠ
2. ã€Œä¼šè©±é–‹å§‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. éŸ³å£°ã¾ãŸã¯ãƒ†ã‚­ã‚¹ãƒˆã§ä¼šè©±
4. ã€Œè¬›è©•ã‚’è¦‹ã‚‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦è©•ä¾¡ç¢ºèª

## 3. å±¥æ­´é–²è¦§
1. ã€Œç·´ç¿’å±¥æ­´ã€ã‚¿ãƒ–ã‚’ã‚¯ãƒªãƒƒã‚¯
2. éå»ã®ãƒ­ãƒ¼ãƒ—ãƒ¬ä¸€è¦§ã‚’ç¢ºèª
3. ã€Œè©³ç´°ã‚’è¦‹ã‚‹ã€ã§ä¼šè©±å†…å®¹ã‚’ç¢ºèª

## 4. CSVå‡ºåŠ›
1. ç·´ç¿’å±¥æ­´ãƒšãƒ¼ã‚¸ã§ã€ŒCSVå‡ºåŠ›ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸCSVã‚’Excelã§é–‹ã
```

#### ã‚¿ã‚¹ã‚¯2: ç®¡ç†è€…ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ä½œæˆ

```markdown
# ç®¡ç†è€…ãƒãƒ‹ãƒ¥ã‚¢ãƒ«

## åº—èˆ—ã‚³ãƒ¼ãƒ‰ç™ºè¡Œ
1. ç®¡ç†ç”»é¢ã«ãƒ­ã‚°ã‚¤ãƒ³
2. ã€Œåº—èˆ—ç®¡ç†ã€ã‚’ã‚¯ãƒªãƒƒã‚¯
3. åº—èˆ—æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ã€Œè¿½åŠ ã€

## çµ±è¨ˆç¢ºèª
1. ã€Œãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã€ã§å…¨åº—èˆ—ã®çµ±è¨ˆã‚’ç¢ºèª
2. ã€Œãƒ©ãƒ³ã‚­ãƒ³ã‚°ã€ã§åº—èˆ—åˆ¥é †ä½ã‚’ç¢ºèª

## ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
1. ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã€ã§å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’ç¢ºèª
2. æ¨©é™å¤‰æ›´ãƒ»å‰Šé™¤ãŒå¯èƒ½
```

#### ã‚¿ã‚¹ã‚¯3: ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆä½œæˆ

```markdown
# v1.0.0 ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ

## ğŸ‰ æ–°æ©Ÿèƒ½
- Googleèªè¨¼ + åº—èˆ—ã‚³ãƒ¼ãƒ‰èªè¨¼
- 6ã‚·ãƒŠãƒªã‚ªå¯¾å¿œï¼ˆ1æ¬¡é¢è«‡ã€œè¿½åŠ å–¶æ¥­ï¼‰
- RAGæ­è¼‰ï¼ˆ600-800ä»¶ã®å®Ÿä¾‹ãƒ‡ãƒ¼ã‚¿ï¼‰
- AIè©•ä¾¡æ©Ÿèƒ½ï¼ˆGPT-4ï¼‰
- ç·´ç¿’å±¥æ­´ãƒ»æˆé•·ã‚°ãƒ©ãƒ•
- CSVå‡ºåŠ›
- åº—èˆ—ç®¡ç†ãƒ»ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ©Ÿèƒ½
- 100åº—èˆ—å¯¾å¿œ

## ğŸ”§ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- Frontend: React + TypeScript + Vite
- Backend: Flask + Python
- Database: Supabase (PostgreSQL)
- AI: OpenAI GPT-4o-mini / GPT-4
- RAG: FAISS + text-embedding-3-large
- Deploy: Vercel + Railway

## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
- å¿œç­”é€Ÿåº¦: <1ç§’
- åŒæ™‚æ¥ç¶š: 100ãƒ¦ãƒ¼ã‚¶ãƒ¼å¯¾å¿œ
- ç¨¼åƒç‡: 99.9%ç›®æ¨™

## ğŸ“ åˆ¶é™äº‹é …
- éŸ³å£°å…¥åŠ›: 1å›30ç§’ã¾ã§
- ä¼šè©±å±¥æ­´: æœ€å¤§50ã‚¿ãƒ¼ãƒ³
- CSVå‡ºåŠ›: æœ€å¤§1000ä»¶
```

#### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ä½œæˆ
- [ ] ç®¡ç†è€…ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ä½œæˆ
- [ ] ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆä½œæˆ
- [ ] æœ¬ç•ªãƒªãƒªãƒ¼ã‚¹å®Œäº†

---

### Week 8ã¾ã¨ã‚

âœ… æœ¬ç•ªç¨¼åƒå¯èƒ½

---

## ğŸ“Š é€²æ—ç®¡ç†ã‚·ãƒ¼ãƒˆ

```
ç¾åœ¨åœ°: Week 1 å®Œäº† â†’ Week 2 é–‹å§‹

å…¨ä½“é€²æ—: â– â– â– â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡â–¡ 35%

Week 1: â– â– â– â– â– â– â–  âœ… å®Œäº†ï¼ˆ2025-11-11ï¼‰
Week 2: â–¡â–¡â–¡â–¡â–¡â–¡â–¡ â³ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
Week 3: â–¡â–¡â–¡â–¡â–¡
Week 4: â–¡â–¡â–¡â–¡â–¡
Week 5: â–¡â–¡â–¡â–¡â–¡
Week 6: â–¡â–¡â–¡â–¡â–¡
Week 7: â–¡â–¡â–¡â–¡â–¡
Week 8: â–¡â–¡â–¡â–¡â–¡
```

---

## âœ… æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### âœ… Week 1 å®Œäº†ï¼ˆ2025-11-11ï¼‰

**å®Œäº†ã—ãŸå†…å®¹:**
- âœ… Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆå®Œäº†
- âœ… Google OAuthè¨­å®šå®Œäº†
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆãƒ»æ§‹ç¯‰å®Œäº†
- âœ… RLSè¨­å®šå®Œäº†
- âœ… èªè¨¼ãƒ•ãƒ­ãƒ¼å®Ÿè£…å®Œäº†
- âœ… åº—èˆ—ç®¡ç†ç”»é¢å®Ÿè£…å®Œäº†
- âœ… ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒUIçµ±ä¸€å®Œäº†

### ğŸ¯ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—: Week 2ï¼ˆ6ã‚·ãƒŠãƒªã‚ªæ§‹ç¯‰ + RAGæ§‹ç¯‰ï¼‰

**ä»Šã™ãå§‹ã‚ã‚‹ã“ã¨:**

1. **6ã‚·ãƒŠãƒªã‚ªã®JSONä½œæˆï¼ˆDay 1-2ï¼‰**
   ```bash
   # scenariosãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆ
   mkdir -p scenarios
   cd scenarios

   # 6ã¤ã®ã‚·ãƒŠãƒªã‚ªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
   touch meeting_1st.json      # 1æ¬¡é¢è«‡
   touch meeting_1_5.json      # 1.5æ¬¡é¢è«‡
   touch meeting_2nd.json      # 2æ¬¡é¢è«‡
   touch meeting_3rd.json      # 3æ¬¡é¢è«‡
   touch kickoff.json          # ã‚­ãƒƒã‚¯ã‚ªãƒ•MTG
   touch upsell.json           # è¿½åŠ å–¶æ¥­
   touch index.json            # ã‚·ãƒŠãƒªã‚ªä¸€è¦§
   ```

2. **éŸ³å£°ãƒ‡ãƒ¼ã‚¿ã®æº–å‚™ï¼ˆDay 3-4ï¼‰**
   - ç„¡æ–™ç›¸è«‡ã®éŒ²éŸ³30æœ¬ã‚’æº–å‚™
   - Whisper APIã§æ–‡å­—èµ·ã“ã—
   - å–¶æ¥­ãƒ»ç›¸è«‡è€…ã®è©±è€…åˆ†é›¢
   - ã‚·ãƒŠãƒªã‚ªåˆ¥ã«ã‚¿ã‚°ä»˜ã‘

3. **RAGãƒ‡ãƒ¼ã‚¿æº–å‚™ï¼ˆDay 3-4ï¼‰**
   - å„ã‚·ãƒŠãƒªã‚ª100-150ä»¶ã®Q&Aä¾‹ã‚’ä½œæˆ
   - åˆè¨ˆ600-800ä»¶ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹ç¯‰

**Week 2ã®ç›®æ¨™:**
- 6ã‚·ãƒŠãƒªã‚ªã®è©³ç´°è¨­è¨ˆå®Œäº†
- RAGãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹600-800ä»¶ä½œæˆ
- ã‚·ãƒŠãƒªã‚ªåˆ¥æ¤œç´¢æ©Ÿèƒ½å®Ÿè£…

**Week 2å®Œäº†å¾Œã®æˆæœç‰©:**
- âœ… 6ã‚·ãƒŠãƒªã‚ªJSONï¼ˆãƒšãƒ«ã‚½ãƒŠãƒ»ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³å«ã‚€ï¼‰
- âœ… RAGã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ§‹ç¯‰æ¸ˆã¿
- âœ… ã‚·ãƒŠãƒªã‚ªåˆ¥æ¤œç´¢æ©Ÿèƒ½å‹•ä½œç¢ºèª

### é–‹ç™ºé–‹å§‹ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆï¼ˆWeek 2å‘ã‘ï¼‰

- [x] Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆå®Œäº†
- [x] Google OAuthè¨­å®šå®Œäº†
- [x] é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å®Œäº†
- [ ] éŸ³å£°ãƒ‡ãƒ¼ã‚¿30æœ¬æº–å‚™å®Œäº†
- [ ] ã‚·ãƒŠãƒªã‚ªè¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç¢ºèª
- [ ] Week 2 Day 1é–‹å§‹

---

*ã“ã®æ‰‹é †æ›¸ã¯SNSå‹•ç”»å–¶æ¥­ãƒ­ãƒ¼ãƒ—ãƒ¬ã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºã‚’æ®µéšçš„ã«é€²ã‚ã‚‹ãŸã‚ã®ã‚¬ã‚¤ãƒ‰ã§ã™ã€‚*
*æœ€çµ‚æ›´æ–°: 2025å¹´11æœˆ11æ—¥ï¼ˆWeek 1å®Œäº†ï¼‰*
