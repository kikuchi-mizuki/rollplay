# 🎬 SNS動画営業ロープレ自動化システム 要件定義書

> AIが"相談者"を演じ、SNS動画制作営業のトレーニングを自動化
>
> 〜音声 × 映像 × AI講評で、フランチャイズ全店舗の営業力を標準化〜

---

## 🏢 プロジェクト概要

### ■ コンセプト

**「SNS動画営業力を、誰でも・どこでも・何度でもトレーニングできる時代へ。」**

AIが無料相談に来た相談者役を演じ、実際の営業現場に近いロールプレイを

**音声＋映像＋AI講評**で再現。

講師がいなくても、誰でも実践的な練習・フィードバックが可能になります。

### ■ ビジネスモデル

**対象企業**: SNS動画制作会社（フランチャイズ展開）

**事業規模**: 現在複数店舗、将来100店舗規模を想定

**無料相談フロー**:
```
顧客（相談者）が無料相談に来訪
    ↓
営業（相談員）が対応
    ├─ 現状のSNS運用をヒアリング
    ├─ 課題・目標を深掘り
    ├─ SNS動画制作サービスを提案
    └─ 契約・次のステップへ誘導
```

**特徴**:
- 営業が「売り込む」のではなく、相談者の課題を「解決する」スタイル
- 1次面談から契約まで複数回の面談を経て信頼関係を構築
- 既存顧客への追加営業も重要

---

## 🎯 導入の目的

| 課題 | 解決策 |
| --- | --- |
| 教育の属人化 | AIが講師・相談者役を再現し、標準化された営業トレーニングを提供 |
| フランチャイズ拡大による教育コスト増 | 自動応答・自動講評で講師の工数を削減、100店舗でも対応可能 |
| 面談フェーズごとの対応力の差 | 1次〜3次面談まで、段階に応じた練習が可能 |
| 新人の育成期間短縮 | いつでも・何度でも練習できる環境で早期戦力化 |

---

## 💡 システムの特徴

### 🔊 1. AIが"相談者役"を演じる

- 営業担当が話しかけると、AIが相談者役として自然に返答
- 1次面談（警戒心あり）〜追加営業（フランク）まで、関係性の変化を再現

構成：

- **音声認識（Whisper）** → 営業の発話を文字起こし
- **AI返答（GPT-4o-mini）** → 相談者役の自然応答
- **RAG検索（FAISS）** → 実際の無料相談録音30本から学習した多様な応答
- **音声合成（Web Speech API）** → 自然なAI音声で再生

---

### 🎥 2. 映像付きでリアルな練習体験

- 既存の**映像・画像・テロップ素材**を組み合わせ、返答内容に応じて自動切替
- 難しい映像生成は不要、素材を差し替えるだけで独自演出が可能
- `$AUTO`指定で字幕を自動反映

---

### 🧠 3. SNS動画営業特化のAI講評

- ロープレ終了後にAIが自動講評を生成
- **「ヒアリング力・共感力・提案力・信頼構築力」を5段階で採点**
- 良かった点・改善点・アドバイスを出力（JSON / CSV形式で保存可能）

**従来の営業評価との違い**:
| 従来の評価軸 | SNS動画営業特化の評価軸 |
|------------|---------------------|
| 質問力 | **ヒアリング力** - SNS運用状況・課題を引き出す |
| 傾聴力 | **共感力** - 相談者の不安に寄り添う |
| 提案力 | **提案力** - 動画制作の具体的な解決策を提示 |
| クロージング力 | **信頼構築力** - 押し売りせず、次のステップに自然誘導 |

---

### 🧩 4. 6段階のシナリオで実践的トレーニング

実際の営業フローに沿った6つのシナリオ:

```
[1次面談] 初回接触・関係構築
    ↓
[1.5次面談] 少し打ち解けた状態での情報交換
    ↓
[2次面談] 具体的な提案・検討
    ↓
[3次面談] クロージング・契約
    ↓
[キックオフMTG] プロジェクト開始・協力関係
    ↓
[追加営業] 既存顧客への新規提案
```

**各シナリオでAI相談者の態度が変化**:
- 1次面談: 警戒心あり、距離感
- 2次面談: 前向きだが慎重、条件確認
- 3次面談: ほぼ決定、最終確認
- キックオフ: 協力的、フランク
- 追加営業: 既存の信頼関係、予算は慎重

---

### 🏢 5. フランチャイズ100店舗対応

**Google認証 + 店舗コード方式**:
```
1. Googleアカウントでログイン（1クリック）
2. 店舗コード入力（例: STORE_001）
3. すぐに練習開始
```

**店舗管理機能**:
- 本部: 全店舗のデータ閲覧、店舗コード発行
- 店舗管理者: 自店舗のメンバー管理、スコア確認
- 営業担当: 練習・履歴閲覧

---

## 📚 シナリオ設計

### 6シナリオの詳細

#### 1️⃣ 1次面談（初回接触）

**フェーズ**: 初回接触

**AI相談者のペルソナ**:
```json
{
  "customer_role": "SNS担当者 or 経営者",
  "tone": "警戒心あり、慎重",
  "relationship": "初対面",
  "knowledge_level": "動画制作について不明",
  "decision_power": "情報収集段階",
  "pain_points": [
    "SNSの反応が悪い",
    "動画制作の知識がない",
    "予算が不明確",
    "他社との比較をしたい"
  ]
}
```

**典型的な会話**:
```
相談者: 「SNS動画って、どれくらいの予算でできますか？」
営業: 「ご予算はどれくらいでお考えですか？」
相談者: 「まだ分からなくて...検討段階なんです」
営業: 「なるほど。まず現状のSNS運用についてお聞かせください」
相談者: 「InstagramとTikTokをやっていますが、反応が悪くて...」
```

**評価のポイント**:
- ヒアリング力: SNS運用状況を自然に聞き出せるか
- 共感力: 不安を受け止められるか
- 信頼構築力: 押し売りせず、安心感を与えられるか

---

#### 2️⃣ 1.5次面談（関係構築）

**フェーズ**: 関係構築

**AI相談者のペルソナ**:
```json
{
  "tone": "少し打ち解けてきた",
  "relationship": "2回目",
  "knowledge_level": "基本的な理解はある",
  "decision_power": "まだ検討中",
  "pain_points": [
    "具体的な費用感が知りたい",
    "制作期間が気になる",
    "他社との違いが知りたい"
  ]
}
```

**評価のポイント**:
- ヒアリング力: 具体的な課題を深掘りできるか
- 提案力: サービス詳細を分かりやすく説明できるか

---

#### 3️⃣ 2次面談（提案・検討）

**フェーズ**: 提案・検討

**AI相談者のペルソナ**:
```json
{
  "tone": "前向きだが慎重",
  "relationship": "ある程度の信頼関係",
  "knowledge_level": "サービスを理解している",
  "decision_power": "社内で検討している",
  "pain_points": [
    "費用対効果が心配",
    "他社との最終比較",
    "社内稟議を通せるか"
  ]
}
```

**評価のポイント**:
- 提案力: 具体的な事例を示せるか
- 共感力: 懸念点に寄り添えるか

---

#### 4️⃣ 3次面談（クロージング）

**フェーズ**: クロージング

**AI相談者のペルソナ**:
```json
{
  "tone": "決定に向けて前向き",
  "relationship": "信頼関係が構築済み",
  "knowledge_level": "詳細まで理解",
  "decision_power": "ほぼ決定できる状態",
  "pain_points": [
    "最終的な条件確認",
    "契約の詳細が気になる",
    "スケジュールの調整"
  ]
}
```

**評価のポイント**:
- 信頼構築力: 自然にクロージングできるか
- 提案力: 最終条件を整理できるか

---

#### 5️⃣ キックオフMTG（プロジェクト開始）

**フェーズ**: プロジェクト開始

**AI相談者のペルソナ**:
```json
{
  "tone": "協力的、前向き",
  "relationship": "既にクライアント",
  "knowledge_level": "サービスを理解",
  "decision_power": "プロジェクト進行中",
  "pain_points": [
    "スムーズに進めたい",
    "何を準備すればいいか",
    "期待通りの成果が出るか"
  ]
}
```

**評価のポイント**:
- ヒアリング力: 必要な準備を確認できるか
- 信頼構築力: 協力関係を築けるか

---

#### 6️⃣ 追加営業（既存顧客への提案）

**フェーズ**: 既存顧客への提案

**AI相談者のペルソナ**:
```json
{
  "tone": "親しみやすい、フランク",
  "relationship": "既存の信頼関係",
  "knowledge_level": "サービスを経験済み",
  "decision_power": "前回の成果次第",
  "pain_points": [
    "前回の成果は満足",
    "でも予算は限られている",
    "本当に必要か検討したい"
  ]
}
```

**評価のポイント**:
- 提案力: 新たな価値を提案できるか
- 共感力: 予算の懸念に寄り添えるか

---

## 🎓 音声データから学習

### データソース

**既存の無料相談録音データ**: 30本
- 1次面談: 5本 × 30分
- 1.5次面談: 5本 × 30分
- 2次面談: 5本 × 30分
- 3次面談: 5本 × 30分
- キックオフMTG: 5本 × 30分
- 追加営業: 5本 × 30分

**合計**: 900分（15時間）の実録音声

### データ処理フロー

```
音声ファイル（mp3/wav）
    ↓
Whisper APIで文字起こし
    ↓
話者分離（営業・相談者）
    ↓
シナリオ別にタグ付け
    ├─ シーン（挨拶/ヒアリング/提案/クロージング）
    ├─ トピック（予算/期間/事例/競合）
    ├─ 感情（不安/興味/懸念/前向き）
    └─ 関係性レベル（1-5）
    ↓
相談者の発言を抽出（600-800件）
    ↓
Embedding生成（text-embedding-3-large）
    ↓
FAISS インデックスに登録
    ↓
シナリオ別RAG検索が可能に
```

### RAG検索の仕組み

```python
# 1次面談で練習中
営業: 「現状のSNS運用についてお聞かせください」
    ↓
RAG検索: scenario_id="meeting_1st" でフィルター
    ↓
類似する相談者発言トップ3を取得:
- 「Instagramをやっていますが、反応が悪くて...」
- 「動画は作ったことがないんです」
- 「他社も見ていて、比較したいです」
    ↓
GPT-4o-miniがこれらを参考に自然な応答を生成
    ↓
AI相談者: 「InstagramとTikTokです。でも反応が悪くて...」
```

**メリット**:
- 実際の相談者のような自然な応答
- シナリオに合った関係性・トーン
- 600-800件のバリエーション

---

## 🎯 評価基準（Rubric）- SNS動画営業特化

### 評価項目（4軸・均等配分）

| 評価軸 | 配点 | 定義 | SNS動画営業での意味 |
| --- | --- | --- | --- |
| **ヒアリング力** | 25% | 相談者の現状・課題・目標を的確に引き出す | SNS運用状況、ターゲット層、予算感を聞き出す |
| **共感力** | 25% | 相談者の不安・懸念に寄り添う | 「動画制作が不安」「予算が心配」に共感 |
| **提案力** | 25% | SNS動画制作の具体的な解決策を提示 | 事例を示し、相談者に合った動画を提案 |
| **信頼構築力** | 25% | 押し売りせず、次のステップに自然誘導 | 「お見積もり作成しますね」等の自然なクロージング |

### 5段階評価基準

#### ヒアリング力

| スコア | レベル | 説明 |
|--------|--------|------|
| 1 | ヒアリングなし | 一方的に話している |
| 2 | 表面的な質問のみ | 「どのSNSですか？」程度の質問のみ |
| 3 | 基本的なヒアリング | 現状と課題を確認している |
| 4 | 深掘りヒアリング | 目標・ターゲット・予算まで確認 |
| 5 | 本質的なヒアリング | 相談者の本当の悩み・目的を引き出している |

#### 共感力

| スコア | レベル | 説明 |
|--------|--------|------|
| 1 | 共感なし | 相談者の不安を無視 |
| 2 | 形式的な相槌のみ | 「そうですか」程度 |
| 3 | 基本的な共感 | 「その不安、分かります」 |
| 4 | 具体的な共感 | 不安を受け止め、安心させる |
| 5 | 深い共感＋解決策 | 不安を理解し、解消する道筋を示す |

#### 提案力

| スコア | レベル | 説明 |
|--------|--------|------|
| 1 | 提案なし | 具体的な提案が見られない |
| 2 | 抽象的な提案 | 「動画がいいですよ」程度 |
| 3 | 一般的な提案 | サービス紹介のみ |
| 4 | 具体的な提案 | 事例付きで提案 |
| 5 | カスタマイズ提案 | 相談者の課題に最適化された提案 |

#### 信頼構築力

| スコア | レベル | 説明 |
|--------|--------|------|
| 1 | 押し売り | 強引なクロージング |
| 2 | 唐突なクロージング | タイミングを誤る |
| 3 | 弱いクロージング | 曖昧な次のステップ |
| 4 | 自然な誘導 | 「お見積もり作成しますね」等 |
| 5 | 信頼ベースの誘導 | 相談者が安心して次に進める |

---

## 🏗️ システムアーキテクチャ

### 技術スタック

| 項目 | 使用技術 |
| --- | --- |
| **バックエンド** | Python（Flask） |
| **フロントエンド** | React 18 + TypeScript + Vite |
| **スタイリング** | Tailwind CSS |
| **データベース** | Supabase（PostgreSQL） |
| **認証** | Supabase Auth（Google OAuth） |
| **音声認識** | OpenAI Whisper API |
| **AI対話** | OpenAI GPT-4o-mini |
| **AI講評** | OpenAI GPT-4 |
| **音声合成** | Web Speech API（日本語TTS） |
| **RAG検索** | FAISS + OpenAI Embeddings（text-embedding-3-large） |
| **デプロイ** | Vercel（フロント）+ Railway/Render（バックエンド） |

### データベース設計（100店舗対応）

```sql
-- 店舗マスタ
CREATE TABLE stores (
  id UUID PRIMARY KEY,
  store_code TEXT UNIQUE NOT NULL,      -- "STORE_001", "STORE_002" ...
  store_name TEXT NOT NULL,             -- "東京銀座店"
  region TEXT,                          -- "関東", "関西" 等
  status TEXT DEFAULT 'active',
  created_at TIMESTAMP DEFAULT NOW()
);

-- ユーザー（Google認証）
CREATE TABLE profiles (
  id UUID PRIMARY KEY REFERENCES auth.users,
  store_id UUID REFERENCES stores,
  store_code TEXT,
  display_name TEXT NOT NULL,
  email TEXT UNIQUE NOT NULL,
  avatar_url TEXT,                      -- Googleアバター
  role TEXT DEFAULT 'user',             -- admin/manager/user
  created_at TIMESTAMP DEFAULT NOW(),
  last_active_at TIMESTAMP
);

-- 会話履歴
CREATE TABLE conversations (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES profiles,
  store_id UUID REFERENCES stores,
  scenario_id TEXT NOT NULL,            -- "meeting_1st", "meeting_2nd" ...
  scenario_title TEXT,
  messages JSONB NOT NULL,
  duration_seconds INT,
  created_at TIMESTAMP DEFAULT NOW()
);

-- 評価履歴
CREATE TABLE evaluations (
  id UUID PRIMARY KEY,
  conversation_id UUID REFERENCES conversations,
  user_id UUID REFERENCES profiles,
  store_id UUID REFERENCES stores,
  scenario_id TEXT NOT NULL,
  scores JSONB NOT NULL,                -- {hearing: 4, empathy: 5, ...}
  total_score INT,
  average_score DECIMAL(3,2),
  comments JSONB,
  created_at TIMESTAMP DEFAULT NOW()
);
```

### Row Level Security（RLS）

```sql
-- ユーザーは自分のデータのみ閲覧
CREATE POLICY "Users can view own data"
  ON conversations FOR SELECT
  USING (auth.uid() = user_id);

-- 店舗管理者は自店舗のデータを閲覧
CREATE POLICY "Managers can view store data"
  ON conversations FOR SELECT
  USING (
    EXISTS (
      SELECT 1 FROM profiles
      WHERE id = auth.uid()
        AND role = 'manager'
        AND store_id = conversations.store_id
    )
  );

-- 本部管理者は全データ閲覧
CREATE POLICY "Admins can view all data"
  ON conversations FOR SELECT
  USING (
    EXISTS (
      SELECT 1 FROM profiles
      WHERE id = auth.uid() AND role = 'admin'
    )
  );
```

---

## 📅 開発スケジュール（8週間・2ヶ月）

### Week 1: Google認証 + 店舗管理基盤 ✅ **完了（2025-11-11）**

- ✅ Supabaseプロジェクト作成
- ✅ Google OAuth設定
- ✅ データベース設計・構築（stores, profiles, conversations, evaluations）
- ✅ RLS設定
- ✅ Google認証UI（ログイン・登録・店舗コード入力）
- ✅ 本部管理者: 店舗コード発行UI
- ✅ ダークテーマUI統一

**成果物**: 認証付きアプリ（店舗コード必須） ← ✅ **達成**

---

### Week 2: 6シナリオ構築 + 音声データ処理

- 6シナリオのJSON作成（meeting_1st 〜 upsell）
- 音声データ30本の文字起こし（Whisper API）
- 話者分離（営業・相談者）
- シナリオ別タグ付け
- RAGインデックス構築（600-800件）
- シナリオ別検索機能実装

**成果物**: 6シナリオ + RAGデータ600-800件

---

### Week 3: データ永続化 + シナリオ切替UI

- Supabase統合（バックエンド）
- 会話履歴保存API
- 評価履歴保存API
- シナリオ選択UI（ヘッダー）
- 6シナリオ切り替え機能
- 自動保存機能

**成果物**: データが残るアプリ（6シナリオ対応）

---

### Week 4: 履歴閲覧 + CSV出力

- 過去の練習一覧（シナリオ別フィルター）
- 会話の再生（読み返し）
- 評価の振り返り
- スコア推移グラフ（Chart.js）
- シナリオ別平均スコア
- CSV出力機能（個人・店舗別）

**成果物**: 成長を可視化できるアプリ

---

### Week 5: 評価精度向上（重点）

- 各シナリオで実ロープレ（5-10回 × 6 = 30-60回）
- 講師評価との比較
- シナリオ別Few-shot作成（18-30件）
- Rubric調整（SNS動画営業特化）
- プロンプトチューニング
- GPT-4 vs GPT-4o-mini比較

**目標**: 講師評価との一致率80%

---

### Week 6: 店舗管理機能 + レポート

- 店舗管理者機能（自店舗メンバー・スコア確認）
- 本部管理者機能（全店舗サマリー・ランキング）
- リージョン別集計
- CSV一括出力

**成果物**: フランチャイズ管理機能完備

---

### Week 7: パフォーマンス最適化 + 同時利用対応

- データベース最適化（インデックス・クエリ）
- 同時アクセス対応（50人同時）
- APIレート制限
- キャッシング戦略
- エラーハンドリング強化

**成果物**: 100店舗対応・高速・安定稼働

---

### Week 8: テスト・ドキュメント・デプロイ

- 統合テスト（全機能・全シナリオ）
- デバイス別テスト（デスクトップ・モバイル）
- ロール別テスト（一般・管理者・本部）
- セキュリティチェック
- ドキュメント作成（ユーザー・管理者・システム）
- 本番デプロイ（Vercel + Railway + Supabase）

**成果物**: 本番稼働可能なシステム

---

## 📊 現在の実装状況

**更新日**: 2025年11月21日
**開発進捗**: 90%完成（Week 1-5完了 + 音声改善・D-ID統合・アバター管理 / 全8週間）

### ✅ Week 1: Google認証 + 店舗管理基盤（完了）

**実装済み機能:**

#### 1. 認証基盤
- ✅ Supabase プロジェクト作成（Tokyo リージョン）
- ✅ Google OAuth 認証フロー
  - ログイン画面（LoginPage.tsx）
  - 初回登録画面（RegisterPage.tsx）
  - 店舗コード検証機能
  - OAuth コールバック処理（AuthCallback.tsx）
- ✅ ログアウト機能
- ✅ 認証状態管理（AuthContext）

#### 2. データベース設計
```sql
stores (店舗マスタ)
├─ id: UUID
├─ store_code: TEXT (UNIQUE) ← 店舗識別コード
├─ store_name: TEXT
├─ region: TEXT
├─ status: TEXT (active/inactive)
└─ created_at, updated_at

profiles (ユーザープロフィール)
├─ id: UUID (auth.users連携)
├─ store_id: UUID → stores
├─ store_code: TEXT
├─ display_name: TEXT
├─ email: TEXT (UNIQUE)
├─ avatar_url: TEXT
├─ role: TEXT (admin/manager/user)
└─ created_at, last_active_at

conversations (会話履歴) ← Week 3で使用予定
├─ id: UUID
├─ user_id: UUID → profiles
├─ store_id: UUID → stores
├─ scenario_id: TEXT
├─ messages: JSONB
└─ duration_seconds, created_at

evaluations (評価履歴) ← Week 3で使用予定
├─ id: UUID
├─ conversation_id: UUID → conversations
├─ user_id: UUID → profiles
├─ scores: JSONB
├─ total_score: INT
└─ average_score, comments, created_at
```

#### 3. Row Level Security (RLS)
- ✅ ユーザーは自分のデータのみ閲覧・作成可能
- ✅ 店舗管理者は自店舗データを閲覧可能
- ✅ 本部管理者は全データ閲覧可能
- ✅ 循環参照問題を修正（profiles テーブルへの無限ループを解消）

#### 4. 管理機能
- ✅ 本部管理者専用の店舗管理画面
  - 店舗コード自動生成（8桁英数字）
  - 店舗一覧表示
  - 店舗の追加・削除
  - クリップボードコピー機能

#### 5. UI/UX
- ✅ ダークテーマで全画面統一
  - 暗いグラデーション背景: `from-[#0D0E20] via-[#16172B] to-[#272A46]`
  - ガラスカード効果: `backdrop-blur-xl`, `rgba(255, 255, 255, 0.08)`
  - パープルグラデーションボタン: `from-[#6C5CE7] to-[#A29BFE]`
- ✅ レスポンシブデザイン
- ✅ ローディング状態表示

**解決した技術課題:**
1. **RLS循環参照問題** - 管理者権限チェック時にprofilesテーブルを再参照し無限ループが発生
   - 解決策: ポリシーを簡素化し、認証ユーザー全員が閲覧可能に変更
2. **認証初期化の競合状態** - `initAuth()`と`onAuthStateChange()`が同時実行され読み込み無限ループ
   - 解決策: `isInitialized`フラグを導入し、初期化完了後のみイベント処理を実行
3. **環境変数の読み込みタイミング** - Viteサーバー再起動が必要
   - 解決策: .env変更後は必ずサーバー再起動を実行

**実装ファイル一覧:**
- `src/lib/supabase.ts` - Supabaseクライアント
- `src/contexts/AuthContext.tsx` - 認証状態管理
- `src/components/Auth/LoginPage.tsx` - ログイン画面
- `src/components/Auth/RegisterPage.tsx` - 初回登録画面
- `src/components/Auth/AuthCallback.tsx` - OAuthコールバック
- `src/components/Admin/StoreManagementPage.tsx` - 店舗管理画面
- `src/components/Header.tsx` - ヘッダー（ログアウト機能追加）
- `database/01_create_stores.sql` - storesテーブル作成
- `database/02_create_profiles.sql` - profilesテーブル作成
- `database/03_create_conversations.sql` - conversationsテーブル作成
- `database/04_create_evaluations.sql` - evaluationsテーブル作成
- `database/05_rls_policies.sql` - RLSポリシー設定
- `database/06_fix_rls_circular_reference.sql` - 循環参照修正

### ✅ Week 2: 6シナリオ構築 + RAG検索強化（完了）

**実装済み:**
- ✅ **6シナリオのJSON作成完了**
  - meeting_1st（1次面談 - 警戒心あり、慎重な態度）
  - meeting_1_5th（1.5次面談 - 少し打ち解けた状態）
  - meeting_2nd（2次面談 - 前向きだが慎重）
  - meeting_3rd（3次面談 - クロージング段階）
  - kickoff_meeting（キックオフMTG - 協力的）
  - upsell（追加営業 - フランク、既存顧客）
- ✅ **シナリオ別ペルソナ設定**
  - 各シナリオごとに異なるトーンと態度
  - 評価軸の重み付け（質問力・傾聴力・提案力・クロージング力）
- ✅ **RAG検索のシナリオフィルタリング**
  - scenario_idによる検索フィルター機能
  - シナリオ別の営業パターン検索
- ✅ **フロントエンドのシナリオ選択UI**
  - ヘッダーでシナリオ切り替え
  - シナリオ切替時の会話自動リセット
- ✅ **音声品質改善**
  - OpenAI TTS統合（より自然な音声）
  - Web Speech APIへの自動フォールバック
  - 録音エラーハンドリング改善（最小2秒チェック）

**実装ファイル一覧:**
- `scenarios/meeting_1st.json` - 1次面談シナリオ
- `scenarios/meeting_1_5th.json` - 1.5次面談シナリオ
- `scenarios/meeting_2nd.json` - 2次面談シナリオ
- `scenarios/meeting_3rd.json` - 3次面談シナリオ
- `scenarios/kickoff_meeting.json` - キックオフMTGシナリオ
- `scenarios/upsell.json` - 追加営業シナリオ
- `scenarios/index.json` - シナリオ一覧管理
- `app.py` - RAG検索フィルター機能（L201-259）
- `src/RoleplayApp.tsx` - シナリオ切替ロジック（L51-113）
- `rag_index/sales_patterns.faiss` - FAISSインデックス
- `rag_index/sales_patterns.json` - RAGパターンデータ（49件）

### ✅ Week 3: データ永続化 + シナリオ切替UI（完了）

**実装済み機能:**
- ✅ **Supabase統合（バックエンド）**
  - Pythonバックエンドからsupabase-py v2.0.0で接続
  - 会話履歴保存API（`POST /api/conversations`）
    - user_id, store_id, scenario_id, messages, duration_seconds を保存
    - conversation_id を返却
  - 会話履歴取得API（`GET /api/conversations`）
    - user_idで絞り込み、scenario_idでフィルタリング
    - 最新順でソート、件数制限対応
  - 評価履歴保存API（`POST /api/evaluations`）
    - スコアの合計と平均を自動計算
    - evaluation_id を返却
  - 評価履歴取得API（`GET /api/evaluations`）
    - user_idで絞り込み、scenario_idでフィルタリング
- ✅ **シナリオ切替時の会話リセット**
  - シナリオ変更時に自動的に会話をクリア
  - 評価結果もリセット
  - 新しいシナリオの初期メッセージを自動表示

**実装ファイル一覧:**
- `app.py` - Supabase統合とAPI（L65-77, L1073-1227）
- `requirements.txt` - supabase==2.0.0 追加
- `src/RoleplayApp.tsx` - シナリオ切替ロジック
- `src/components/Header.tsx` - シナリオ選択UI
- `src/lib/api.ts` - API通信ロジック

### ✅ Week 4: 履歴閲覧 + CSV出力（完了）

**実装済み機能:**
- ✅ **バックエンドAPI完成**
  - `GET /api/conversations?user_id=xxx&scenario_id=yyy&limit=50`
    - 会話履歴を取得
    - user_idで絞り込み、scenario_idでフィルタリング（オプション）
    - 最新順でソート、件数制限対応
  - `GET /api/evaluations?user_id=xxx&scenario_id=yyy&limit=50`
    - 評価履歴を取得
    - user_idで絞り込み、scenario_idでフィルタリング（オプション）
    - POST/GETの両方に対応
- ✅ **過去の練習一覧画面**（HistoryPage）
  - 評価履歴の表示UI
  - シナリオ別フィルター機能（ドロップダウン）
  - 統計カード表示（総練習回数、評価完了回数、平均スコア）
  - 評価詳細表示（4軸スコア・色分け表示）
  - 日時フォーマット（日本語形式）
- ✅ **評価の振り返り**
  - スコア詳細表示UI（質問力・傾聴力・提案力・クロージング力）
  - スコアの色分け表示（緑 ≥4, 黄色 ≥3, 赤 <3）
  - シナリオタイトル表示
- ✅ **CSV出力機能**
  - 評価履歴CSV出力（ダウンロードボタン付き）
  - BOM付きUTF-8エンコーディング（Excel互換）
  - 日本語対応のファイル名（evaluations_YYYY-MM-DD.csv）
  - カスタムヘッダー・データ変換機能
- ✅ **ルーティング統合**
  - `/history`ルートでアクセス可能
  - ヘッダーからの履歴リンク

**未実装（オプション機能）:**
- ⏳ **会話の再生（読み返し）**
  - メッセージ一覧の詳細表示UI
  - 会話履歴CSV出力ボタン
- ⏳ **スコア推移グラフ**（Chart.js または recharts）
  - 時系列でのスコア変化を可視化
  - シナリオ別平均スコア表示

**実装ファイル一覧:**
- `app.py` - 履歴取得API（L1111-1227）
- `src/components/History/HistoryPage.tsx` - 履歴閲覧UI（243行）
- `src/lib/csv.ts` - CSV出力ユーティリティ（111行）
- `src/lib/api.ts` - API通信関数（getConversations, getEvaluations）

### ✅ Week 5: 評価精度向上（完了）

**実装済み機能:**
- ✅ **Few-shot評価サンプルの読み込み機能**
  - シナリオIDに応じたFew-shotサンプルを自動読み込み
  - キャッシング機能で高速化
  - `load_evaluation_samples(scenario_id)` 関数を実装
- ✅ **全6シナリオのFew-shotサンプル作成完了**
  - 1次面談（初回接触・関係構築）- 3件のサンプル
  - 1.5次面談（関係構築・情報交換）- 2件のサンプル
  - 2次面談（提案・検討）- 2件のサンプル
  - 3次面談（クロージング）- 2件のサンプル
  - **キックオフMTG（プロジェクト開始）- 3件のサンプル**
  - **追加営業（既存顧客への提案）- 3件のサンプル**
  - 各サンプルに良い例・悪い例、詳細な評価理由を含む
- ✅ **評価プロンプトのシナリオ別Few-shot対応**
  - シナリオ情報（タイトル、ペルソナ、重点評価項目）を評価に反映
  - Few-shotサンプル（良い例1件、悪い例1件）を評価プロンプトに含める
  - シナリオごとに異なる評価基準を適用
- ✅ **フロントエンド修正完了**
  - 評価API呼び出し時にscenario_idを送信
  - api.ts, fakeApi.ts: getEvaluation関数にscenarioIdパラメータを追加
  - RoleplayApp.tsx: 評価取得時にselectedScenarioIdを渡す
- ✅ **評価精度検証機能の実装**
  - 講師評価を保存するデータベーステーブル（instructor_evaluations）
  - 講師評価保存API（POST /api/instructor-evaluations）
  - 講師評価取得API（GET /api/instructor-evaluations）
  - 評価精度レポート生成API（GET /api/evaluation-accuracy）
  - AI評価と講師評価の差分計算・精度指標の自動算出

**実装ファイル一覧:**
- `app.py` - Few-shotサンプル読み込み機能（L182-212）、評価関数改善（L887-987）、評価精度検証API（L1673-1877）
- `evaluation_samples/meeting_1st_samples.json` - 1次面談サンプル（3件）
- `evaluation_samples/meeting_1_5th_samples.json` - 1.5次面談サンプル（2件）
- `evaluation_samples/meeting_2nd_samples.json` - 2次面談サンプル（2件）
- `evaluation_samples/meeting_3rd_samples.json` - 3次面談サンプル（2件）
- **`evaluation_samples/kickoff_meeting_samples.json` - キックオフMTGサンプル（3件）**
- **`evaluation_samples/upsell_samples.json` - 追加営業サンプル（3件）**
- `database/07_create_instructor_evaluations.sql` - 評価精度検証用テーブル
- `src/lib/api.ts` - getEvaluation関数にscenarioIdパラメータ追加
- `src/lib/fakeApi.ts` - 型定義更新
- `src/RoleplayApp.tsx` - 評価取得時にscenarioId送信

**効果:**
- シナリオごとに異なる評価基準を適用可能
- 評価サンプルを参考にした一貫性のある評価
- 評価精度の向上（講師評価との一致率を測定・改善可能）
- 1次面談では「信頼関係構築」、2次面談では「提案力」、キックオフでは「協力関係」、追加営業では「新たな価値提案」など、シナリオの重点に応じた評価
- 講師評価との比較により、AI評価の精度を継続的に改善可能

### ✅ 追加機能: D-IDリップシンク統合（完了）

**実装済み機能:**
- ✅ **D-ID APIクライアント実装**
  - リップシンクアバター動画の生成
  - 音声合成との統合（日本語音声対応）
  - 複数音声IDサポート（Nanami, Keita, Ayumi）
  - エラーハンドリング・タイムアウト処理
- ✅ **フロントエンド統合**
  - DIDAvatarコンポーネント（useDIDAvatar フック）
  - AI応答時の自動動画生成
  - ローディング状態表示
  - 動画再生UI
- ✅ **バックエンドAPI**
  - `/api/did-video` - 動画生成エンドポイント
  - 音声ID・アバター画像の動的指定
  - **キャッシング実装推奨**（70-90%コスト削減可能）

**実装ファイル一覧:**
- `d_id_client.py` - D-ID APIクライアント
- `app.py` - D-ID動画生成エンドポイント（L1232-1268）
- `src/components/DIDAvatar.tsx` - D-IDアバターコンポーネント
- `D-ID_INTEGRATION.md` - D-ID統合ドキュメント

**技術仕様:**
- **音声合成**: Azure Text-to-Speech（ja-JP-NanamiNeural等）
- **アニメーションドライバー**: D-ID Talk API
- **動画形式**: MP4（H.264）
- **生成時間**: 平均20-40秒/本

### ✅ 追加機能: カスタムアバター管理（完了）

**実装済み機能:**
- ✅ **アバターデータベース**
  - `avatars` テーブル作成（Supabase）
  - アバター画像ストレージ（Supabaseバケット）
  - RLSポリシー設定
- ✅ **アバター管理画面**
  - アバター一覧表示
  - アバター追加機能（画像アップロード）
  - タグ付け機能（性別・年齢・役割・雰囲気）
  - アバター削除機能
  - シナリオ別フィルタリング
- ✅ **アバター選択ロジック**
  - タグベースの自動選択
  - ランダム選択
  - シナリオに応じた最適アバター選択
- ✅ **統合機能**
  - D-ID動画生成時のアバター指定
  - 最大20本以上のアバター管理
  - アバター使用履歴追跡（計画中）

**実装ファイル一覧:**
- `supabase/migrations/003_create_avatars_table.sql` - avatarsテーブル定義
- `src/components/AvatarManager.tsx` - アバター管理画面
- `src/lib/avatarManager.ts` - アバター管理ロジック
- `AVATAR_CUSTOMIZATION.md` - アバターカスタマイズガイド

**活用例:**
- 複数のペルソナを持つアバター群（決裁者・担当者・受付等）
- シナリオ別の自動アバター切り替え
- 顧客の多様性を再現（性別・年齢・雰囲気）

### ✅ 追加機能: 管理画面強化（完了）

**実装済み機能:**
- ✅ **本部管理ダッシュボード**（AdminDashboardPage）
  - 全店舗の統計サマリー
  - 店舗別ランキング表示
  - 練習回数・評価回数の集計
  - リアルタイム更新
- ✅ **店舗ダッシュボード**（StoreDashboardPage）
  - 自店舗のメンバー管理
  - 店舗別統計表示
  - メンバー別スコア確認
  - 練習履歴の可視化

**実装ファイル一覧:**
- `src/components/Admin/AdminDashboardPage.tsx` - 本部管理ダッシュボード
- `src/components/Store/StoreDashboardPage.tsx` - 店舗ダッシュボード
- `src/App.tsx` - ルーティング設定（L8-9, L38-63）

### 📝 最近の主要アップデート（2025年11月21日）

**最新コミット履歴（直近10件）:**
```
acbc795 docs: Week 5の進捗を要件定義書に保存（進捗70%）
6a19238 feat: Week 5続き - 追加シナリオのFew-shotサンプルとフロントエンド修正
fd45091 feat: Week 5開始 - 評価精度向上（Few-shot学習対応）
0f33368 fix: 未使用パラメータ警告を修正（csv.ts）
2f199ec fix: TypeScriptビルドエラーを修正
1237f3c docs: Week 4完了を要件定義書に反映（進捗65%）
ef02307 feat: Week 4完了 - 履歴ページにCSV出力機能を追加
168e1f5 docs: 要件定義書の進捗を更新（Week 2-4の実装状況を反映）
2cc3190 fix: TypeScriptビルドエラーを修正（avatarManager.ts）
72b45c2 debug: Supabaseストレージ診断ツールを追加
```

**追加された主要機能:**
1. **Week 2完了**: 6シナリオ構築 + RAG検索強化 + 音声品質改善（OpenAI TTS）
2. **Week 3完了**: データ永続化（Supabase統合） + シナリオ切替UI
3. **Week 4完了**: 履歴閲覧画面 + CSV出力機能
4. **Week 5完了（100%）**: 評価精度向上（Few-shot学習対応 + 評価精度検証機能）
5. **D-IDリップシンク統合** - AIアバターが自然に話す
6. **カスタムアバター管理** - 複数アバターの登録・管理・選択

### 📋 実装済みAPIエンドポイント一覧

**シナリオ関連:**
- `GET /api/scenarios` - シナリオ一覧取得
- `GET /api/scenarios/<scenario_id>` - シナリオ詳細取得

**会話・評価関連:**
- `POST /api/chat` - AI応答生成（シナリオ別）
- `POST /api/transcribe` - 音声文字起こし（Whisper）
- `POST /api/evaluate` - 会話の評価生成

**データ永続化:**
- `POST /api/conversations` - 会話履歴保存
- `GET /api/conversations` - 会話履歴取得（user_id, scenario_idフィルター対応）
- `POST /api/evaluations` - 評価履歴保存
- `GET /api/evaluations` - 評価履歴取得（user_id, scenario_idフィルター対応）
- `POST /api/instructor-evaluations` - 講師評価保存（Week 5追加）
- `GET /api/instructor-evaluations` - 講師評価取得（Week 5追加）
- `GET /api/evaluation-accuracy` - 評価精度レポート生成（Week 5追加）

**音声・動画生成:**
- `POST /api/tts` - OpenAI TTS音声生成
- `POST /api/did-video` - D-IDリップシンク動画生成

**管理機能:**
- `GET /api/admin/stores/stats` - 全店舗統計
- `GET /api/admin/stores/rankings` - 店舗別ランキング
- `GET /api/stores/<store_id>/members` - 店舗メンバー一覧
- `GET /api/stores/<store_id>/analytics` - 店舗別分析データ

### ⏳ 次の実装予定

**Week 4のオプション機能（将来的に実装可能）:**
- 会話履歴の詳細表示UI（メッセージ一覧）
- 会話履歴CSV出力ボタン
- スコア推移グラフ（Chart.js または recharts）

**Week 5のオプション機能（将来的に実装可能）:**
- 講師評価入力UI（フロントエンド）
- 評価精度レポート画面
- Rubric調整とプロンプトチューニング
- GPT-4 vs GPT-4o-mini比較

**Week 6以降（予定）:**
- Week 6: 店舗管理機能の最終調整
  - リージョン別集計機能
  - 店舗別スコアランキング
  - 講師評価入力UI
- Week 7: パフォーマンス最適化
  - 100店舗同時利用対応
  - **D-ID動画キャッシング実装**（優先度：高）
    - テキスト+アバターのハッシュ値でキャッシュキー生成
    - Supabase Storageに動画を保存
    - キャッシュヒット時は即座に返却（API呼び出しなし）
    - よく使われる応答を事前生成（200-500本）
  - データベースインデックス最適化
  - APIレート制限実装
  - 同時アクセス対応（50人同時）
- Week 8: テスト・ドキュメント・本番デプロイ
  - 統合テスト（全機能・全シナリオ）
  - ユーザードキュメント作成
  - セキュリティチェック
  - 本番環境デプロイ

---

## 💰 概算コスト

### 開発費用

| 内容 | 工数 | 費用目安 |
|------|------|----------|
| Week 1: Google認証 + 店舗管理基盤 | 1週間 | 15-20万円 |
| Week 2: 6シナリオ + RAG構築 | 1週間 | 15-20万円 |
| Week 3: データ永続化 | 1週間 | 15-20万円 |
| Week 4: 履歴・CSV出力 | 1週間 | 15-20万円 |
| Week 5: 評価精度向上 | 1週間 | 20-25万円 |
| Week 6: 店舗管理機能 | 1週間 | 15-20万円 |
| Week 7: 最適化 | 1週間 | 15-20万円 |
| Week 8: テスト・デプロイ | 1週間 | 15-20万円 |
| **合計** | **8週間** | **125-165万円** |

### 運用費用（月額・100店舗想定）

| 項目 | 費用 | 備考 |
|------|------|------|
| Supabase Pro | 2,500円 | 100GBストレージ込み |
| バックエンドサーバー | 1-2万円 | Railway/Render（スケーラブル） |
| OpenAI API | 3-8万円 | 100店舗×月平均50回練習 |
| D-ID API | 2-4万円 | **キャッシング活用**でコスト大幅削減 |
| ドメイン・SSL | 数百円 | 年間費用 |
| **合計** | **5.8-14.5万円/月** | キャッシュヒット率70-90%想定 |

**OpenAI API コスト試算**:
```
1練習あたり:
- Whisper: 0.006 USD/分 × 5分 = 0.03 USD
- GPT-4o-mini: 0.15 USD/1Mトークン × 5000トークン = 0.0075 USD
- GPT-4（講評）: 2.5 USD/1Mトークン × 2000トークン = 0.005 USD
合計: 約0.04 USD = 6円/回

100店舗 × 月50回（平均） = 5,000回
5,000回 × 6円 = 30,000円/月

実際は3-8万円程度を想定
```

**D-ID API コスト試算**:
```
D-ID価格（2025年現在）:
- 無料枠: 20クレジット/月（約20本の動画）
- Lite: $5.9/月（120クレジット）
- Basic: $29/月（600クレジット）
- Advanced: $196/月（5,000クレジット）

■ キャッシュなしの場合（非現実的）:
100店舗 × 月50回 × 4本 = 20,000本/月
- 費用: 20,000クレジット = $2,000-4,000/月 ≈ 30-60万円

■ キャッシュ戦略適用（推奨）:
RAGから取得される応答は類似パターンが多いため、
同一テキスト+同一アバターの組み合わせを再利用可能

【初期構築フェーズ】:
- よく使われる応答200-500本を事前生成
  例: 「それはどうしてですか？」「なるほど」「具体的に教えてください」
  「ありがとうございます」「どのようなイメージですか？」等
- シナリオ別の典型応答（6シナリオ × 30-50本 = 180-300本）
- 初期コスト: 400-800本 = $40-160（1回のみ）

【運用フェーズ】:
- キャッシュヒット率: 70-90%（RAGの類似応答パターン）
- 新規生成: 20,000本 × (1 - 0.8) = 4,000本/月
- または: 100店舗 × 50回 × 4本 × 20% = 4,000本/月

運用コスト:
- Basic契約（$29/月）× 7個 = $203/月 ≈ 3万円
- または Advanced契約（$196/月）× 1個 = 2.9万円

■ 最終試算:
- 初期: 400-800本（$40-160、1回のみ）
- 運用: 2-4万円/月（キャッシュヒット率70-90%想定）
```

---

## 📺 UI構成

### メイン画面

```
┌─ Header ────────────────────────────────────────┐
│ [Avatar] 山田太郎（東京銀座店）                 │
│ [シナリオ選択▼] 1次面談                         │
│                                   [ログアウト]  │
├─────────────────────────────────────────────────┤
│  Main (grid layout)                             │
│  ┌─ ChatPanel ──────┬─ MediaPanel ───────────┐ │
│  │ • 会話履歴        │ • Video/Image          │ │
│  │ • 吹き出し形式    │ • 字幕                 │ │
│  │ • スクロール      │ • 録音ウェーブフォーム │ │
│  └──────────────────┴────────────────────────┘ │
├─ Footer (fixed) ────────────────────────────────┤
│  Composer                                       │
│  ├─ Textarea（自動リサイズ）                    │
│  ├─ 🎤 録音ボタン                               │
│  ├─ 📤 送信ボタン                               │
│  ├─ 🗑️ クリアボタン                             │
│  └─ 📊 講評ボタン                               │
└─────────────────────────────────────────────────┘
```

### シナリオ選択

```
[シナリオ選択 ▼]
├─ 1次面談（初回接触・関係構築）
├─ 1.5次面談（情報交換・信頼構築）
├─ 2次面談（提案・検討）
├─ 3次面談（クロージング）
├─ キックオフMTG（プロジェクト開始）
└─ 追加営業（既存顧客への提案）
```

### 講評シート

```
┌─ 評価結果 ─────────────────────────────────────┐
│  [総評] [良かった点] [改善点] [スコア]         │
├─────────────────────────────────────────────────┤
│  【総合評価】                                   │
│  平均スコア: 4.0点 / 5.0点                      │
│                                                 │
│  【スコア詳細】                                 │
│  ┌──────────────────┬─────────┐              │
│  │ ヒアリング力     │ ⭐⭐⭐⭐ 4点 │              │
│  │ 共感力           │ ⭐⭐⭐⭐⭐ 5点 │              │
│  │ 提案力           │ ⭐⭐⭐ 3点   │              │
│  │ 信頼構築力       │ ⭐⭐⭐⭐ 4点 │              │
│  └──────────────────┴─────────┘              │
│                                                 │
│  【良かった点】                                 │
│  ✅ SNS運用状況を自然に聞き出せていた           │
│  ✅ 相談者の不安に共感できていた                │
│                                                 │
│  【改善点】                                     │
│  ⚠️ 具体的な事例をもっと示すと良い              │
│  ⚠️ 次のステップを明確に提案すると◎            │
│                                                 │
│  [CSV出力] [閉じる]                             │
└─────────────────────────────────────────────────┘
```

---

## 🎯 完成時の機能一覧

### 営業担当者（一般ユーザー）

✅ Googleでログイン + 店舗コード入力（初回のみ）
✅ 6シナリオから選択して練習
✅ 音声 or テキスト入力
✅ AI相談者との自然な対話（600-800件のRAGデータ）
✅ **D-IDリップシンクアバター**（AIが自然に話す映像）
✅ **カスタムアバター選択**（複数のアバターから選択可能）
✅ リアルタイム字幕・映像
✅ SNS動画営業特化のAI講評（4軸評価）
✅ 履歴閲覧（シナリオ別フィルター・スコア推移グラフ）
✅ CSV出力（個人データ）

### 店舗管理者

✅ 自店舗メンバー管理
✅ 自店舗の練習状況確認
✅ 自店舗の平均スコア確認（シナリオ別）
✅ CSV出力（店舗データ）

### 本部管理者

✅ 店舗コード発行・管理（STORE_001形式）
✅ **アバター管理**（複数アバターの登録・タグ付け・削除）
✅ 全店舗のデータ閲覧
✅ 店舗別スコアランキング
✅ リージョン別集計
✅ 管理ダッシュボード（統計サマリー・リアルタイム更新）
✅ CSV出力（全店舗データ）

---

## ✅ 導入メリット

### 営業トレーニングの革新

✅ **AI相談者との"実践型"トレーニングがいつでも可能**
- 講師や相手役のスケジュール調整不要
- 24時間いつでも、どこでも練習可能
- 失敗を恐れず何度でも繰り返し練習

✅ **6段階のシナリオで段階的にスキルアップ**
- 1次面談（警戒心あり）から追加営業（フランク）まで
- 関係性の変化をリアルに体験
- 実際の営業フローに沿った練習

✅ **実録音声30本から学習した自然な応答**
- 600-800件の多様なパターン
- シナリオに合った関係性・トーン
- 実際の相談者のようなリアルな対話

✅ **SNS動画営業特化の評価軸**
- ヒアリング力・共感力・提案力・信頼構築力
- 業界特有の課題に対応
- 具体的な改善点を明示

✅ **フランチャイズ100店舗対応**
- Google認証で簡単ログイン
- 店舗別管理・集計
- 全店舗の営業力を標準化

### ビジネス効果

| 効果カテゴリ | 具体的効果 | 期待値 |
| --- | --- | --- |
| **コスト削減** | 講師派遣費用の削減 | 年150〜300万円削減 |
| **教育効率化** | トレーニング時間の短縮 | 従来比50%短縮 |
| **スキル標準化** | 全店舗で統一された営業力 | 100店舗で一定レベル確保 |
| **新人育成** | 早期戦力化 | 育成期間を1/2に短縮 |
| **データ蓄積** | スコアデータで組織改善 | 傾向分析による施策立案 |

---

## 🚀 次のアクション

### 1️⃣ 音声データの準備

- 30本の無料相談録音データ（mp3/wav）を準備
- 各シナリオ5本ずつ × 30分

### 2️⃣ 開発開始

- Supabaseプロジェクト作成
- Google OAuth設定
- Week 1から順次開発

### 3️⃣ 店舗コード体系の決定

- STORE_001, STORE_002, ... STORE_100
- 本部管理者が事前に発行

### 4️⃣ 8週間後にリリース

- 本番環境にデプロイ
- パイロット店舗で試験運用
- 段階的に全店舗展開

---

## 📋 要件定義書作成情報

- **作成日**: 2025年1月11日
- **最終更新日**: 2025年11月20日
- **バージョン**: v4.1（D-ID統合・アバター管理機能追加版）
- **作成者**: AI Assistant
- **承認者**: 未定
- **更新内容**:
  - **v4.1（2025年11月20日）**:
    - D-IDリップシンク統合（AIアバターが自然に話す映像）
    - カスタムアバター管理機能（複数アバター登録・タグ付け・選択）
    - 管理ダッシュボード強化（本部・店舗別統計表示）
    - 進捗更新（45% → 55%完成）
    - コスト試算にD-ID費用を追加
  - **v4.0（2025年1月11日）**:
    - SNS動画制作会社向けに全面刷新
    - 6シナリオ対応（1次〜3次面談、キックオフ、追加営業）
    - Google認証 + 店舗コード（STORE_001形式）
    - 音声データ30本から学習
    - 評価軸をSNS動画営業特化に変更
    - 100店舗対応
    - 8週間開発スケジュール
- **次回更新予定**: 要件変更時または主要マイルストーン達成時

---

*この要件定義書はSNS動画営業ロープレ自動化システムの開発指針として使用されます。*
